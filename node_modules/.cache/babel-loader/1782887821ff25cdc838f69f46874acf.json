{"ast":null,"code":"var _jsxFileName = \"C:\\\\_Mestrado\\\\TDI\\\\Praticas\\\\Projeto\\\\my-app\\\\src\\\\views\\\\LoginView.js\";\n//Login\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\n\nclass LoginView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      loggedIn: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.submit = this.submit.bind(this);\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    console.log(name, value);\n    let data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      window.location.href = \"/main\";\n    }\n\n    if (localStorage.getItem('user')) {\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Login Form\"), React.createElement(\"form\", {\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      value: this.state.email,\n      placeholder: \"email\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      placeholder: \"password\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    })));\n  }\n\n  submit(e) {\n    e.preventDefault();\n    window.axios.post('/api/login', {\n      email: this.state.email,\n      password: this.state.password\n    }).then(response => {\n      console.log('mano', response); //console.log(response.data.data.access_token);\n\n      this.setState({\n        loggedIn: true\n      });\n      localStorage.setItem('user', response.data.user.id); //return <Redirect to='/main' />;\n      //console.log('token', response.data.auth.access_token);\n    }).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n}\n\nexport default LoginView;","map":{"version":3,"sources":["C:/_Mestrado/TDI/Praticas/Projeto/my-app/src/views/LoginView.js"],"names":["React","Component","axios","Redirect","LoginView","constructor","props","state","email","password","loggedIn","handleChange","bind","submit","event","name","target","value","console","log","data","setState","render","window","location","href","localStorage","getItem","e","preventDefault","post","then","response","setItem","user","id","catch","error"],"mappings":"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","sourcesContent":["//Login\r\nimport React, {Component} from 'react'\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nclass LoginView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state={\r\n            email: '',\r\n            password: '',\r\n            loggedIn: false,\r\n        }\r\n\r\n        this.handleChange=this.handleChange.bind(this);\r\n        this.submit=this.submit.bind(this);\r\n    }\r\n    handleChange(event) {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        console.log(name, value);\r\n        let data = {};\r\n        data[name] = value;\r\n\r\n        this.setState(data);\r\n    }\r\n    render() {\r\n\r\n        if (this.state.loggedIn) {\r\n            window.location.href = \"/main\";\r\n        }\r\n        if(localStorage.getItem('user')) {\r\n            return <Redirect to='/main' />;\r\n        }\r\n        return (\r\n            <div>\r\n            <h4>Login Form</h4>\r\n            <form onSubmit={this.submit}>\r\n                <div>\r\n                    <input type=\"text\" name=\"email\" value={this.state.email} placeholder=\"email\" onChange={this.handleChange} />\r\n                </div>\r\n                <div>\r\n                    <input type=\"password\" name=\"password\" value={this.state.password} placeholder=\"password\"  onChange={this.handleChange} />\r\n                </div>\r\n                <input type=\"submit\" value=\"submit\" />\r\n            </form>\r\n        </div>\r\n        )\r\n    }\r\n    submit(e) {\r\n        e.preventDefault();\r\n        \r\n        window.axios.post('/api/login', {email: this.state.email, password: this.state.password})\r\n        .then(response=>{\r\n            console.log('mano', response);\r\n            //console.log(response.data.data.access_token);\r\n            \r\n            this.setState({loggedIn: true});\r\n            \r\n            localStorage.setItem('user', response.data.user.id);\r\n            //return <Redirect to='/main' />;\r\n            //console.log('token', response.data.auth.access_token);\r\n        })\r\n        .catch(error => {\r\n            console.log(error.response);\r\n        })\r\n        ;\r\n    }\r\n}\r\n\r\nexport default LoginView"]},"metadata":{},"sourceType":"module"}