{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\components\\\\ListNewsGrid.js\";\nimport React, { Component, useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { HomePage_styles } from '../css/HomePage.css';\nimport Card from \"react-bootstrap/Card\";\nimport CardDeck from \"react-bootstrap/CardDeck\";\nimport Button from \"react-bootstrap/Button\";\nimport { container, row, col } from \"reactstrap\";\nimport axios from 'axios';\nimport GridSecondaryNavigation from './GridSecondaryNavigation';\nimport recombee from 'recombee-js-api-client';\nimport Modal from 'react-bootstrap/Modal';\nimport { findAllByDisplayValue } from '@testing-library/react';\nimport ReactHooks from 'eslint-plugin-react-hooks';\n\nclass ListNewsGrid extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.state = {\n      news: [],\n      news_topics: [],\n      topics: [],\n      guardados: [],\n      isLoaded: false,\n      categoria: [],\n      click: 200,\n      btn: [],\n      showMore: false,\n      esconde: false,\n      selected: \"\",\n      noticias: [],\n      isLoaded2: false,\n      rita: 0,\n      collections: [],\n      arcozelo: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }),\n      ativo: false,\n      aviso: ''\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClicka = this.handleClicka.bind(this);\n    this.handleClickVerMais = this.handleClickVerMais.bind(this);\n    this.handleSendToLink = this.handleSendToLink.bind(this);\n  }\n\n  handleClose() {\n    this.setState({\n      ativo: false\n    });\n    console.log(this.state.ativo);\n  }\n\n  handleClickColecao(noticiaid, colecaoid, event) {\n    console.log('noticiaid: ', noticiaid);\n    console.log('colecaoid: ', colecaoid);\n    const localUser = localStorage.getItem('user');\n    console.log('user', localUser);\n    var client = new recombee.ApiClient('atenas-atenas-novo', '61Z8UGxxGFlTmuMtE3uUixd0ofZIlefQk68LTUXd2pzExiDtTgUOhSffYoUFmLQB'); // vai ter de duas coisas:\n    // 1. guardar na BD, na tabela news_users, o noticiaId e o coleçaoID\n\n    axios.post('api/newsUser', {\n      news_id: noticiaid,\n      user_id: localUser,\n      collection_id: colecaoid\n    }).then(response => {\n      console.log('resposta:', response); // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\n\n      client.send(new recombee.AddCartAddition(localUser, noticiaid, {\n        'cascadeCreate': true\n      })).then(res => {\n        console.log(res); //window.location.href='';\n\n        this.setState({\n          aviso: 'Notícia guardada com sucesso'\n        }); //window.alert('Notícia Guardada');\n\n        /*setTimeout(()=>{\r\n            // o que vai fazer é fechar a janela\r\n            //window.location.href='';\r\n        },1000);*/\n      });\n      console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\n    }).catch(error => {\n      console.log('erro: ', error.response);\n    });\n  }\n\n  handleClicka(event) {\n    console.log('here--->', event); //console.log(event.id);\n\n    const noticiaEspecial = event.id;\n    console.log('Noticia Clicada', noticiaEspecial);\n    const userEu = localStorage.getItem('user');\n    console.log(userEu);\n    console.log('veer se ele existe', event.guardado);\n\n    if (event.guardado && event.guardado.length) {\n      axios.delete('api/newsUser/' + event.guardado[0].id).then(res => {\n        console.log(res.data);\n        window.location.reload();\n      });\n    } else {\n      console.log('vais adicionar! MOSTRAR A MODAL!', this.state.collections);\n      this.setState({\n        ativo: true,\n        arcozelo: React.createElement(Modal, {\n          show: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(Modal.Dialog, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(Modal.Header, {\n          closeButton: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(Modal.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"Modal title\")), React.createElement(Modal.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, event.id), this.state.collections.map(value3 => {\n          if (value3.user_id == userEu) {\n            if (this.state.aviso == \"\") {\n              return React.createElement(Button, {\n                onClick: () => {\n                  this.handleClickColecao(event.id, value3.id);\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 132\n                },\n                __self: this\n              }, React.createElement(\"span\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 132\n                },\n                __self: this\n              }, value3.collection.charAt(0)), React.createElement(\"span\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 132\n                },\n                __self: this\n              }, value3.collection));\n            } else {\n              return React.createElement(\"div\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 135\n                },\n                __self: this\n              }, this.state.aviso);\n            }\n          }\n        })), React.createElement(Modal.Footer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"Close\"), React.createElement(Button, {\n          variant: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Save changes\"))))\n      });\n    }\n  }\n\n  handleSendToLink(event) {\n    const userEu = localStorage.getItem('user');\n    const noticiaId = event.id;\n    var client = new recombee.ApiClient('atenas-atenas-novo', '61Z8UGxxGFlTmuMtE3uUixd0ofZIlefQk68LTUXd2pzExiDtTgUOhSffYoUFmLQB');\n    console.log(noticiaId, '--> vai ser a noticia');\n    console.log(userEu, '--> vai ser o user');\n    console.log(event, '--> evento');\n    client.send(new recombee.AddPurchase(userEu, noticiaId, {\n      'cascadeCreate': true\n    })).then(res => {\n      console.log(res);\n      console.log('Noticia Visitada --> Compra feita'); //window.location.href = event.url;\n    });\n  }\n\n  handleClickVerMais() {\n    this.setState({\n      showMore: true,\n      esconde: true\n    });\n    document.getElementById(\"botaoVerMais\").style.display = \"none\";\n  }\n\n  handleClick(btnid) {\n    this.setState({\n      click: btnid,\n      selected: btnid\n    });\n    console.log('selecionaddo', this.state.selected);\n    Promise.all([axios('api/newsCategory/' + localStorage.getItem('user') + '/' + btnid)]).then(([res1]) => {\n      return Promise.all([res1]);\n    }).then(([res1]) => {\n      console.log('respostinha', res1);\n      this.setState({\n        isLoaded2: true,\n        noticias: res1.data.data\n      });\n    });\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this._isMounted) {\n      Promise.all([axios('api/newsAll/' + localStorage.getItem('user')), axios('api/category'), axios('api/collection')]).then(([res1, res5, res3]) => {\n        return Promise.all([res1, res5, res3]);\n      }).then(([res1, res5, res3]) => {\n        this.setState({\n          isLoaded: true,\n          news: res1.data.data,\n          categoria: res5.data.data,\n          collections: res3.data.data\n        });\n      });\n    }\n  }\n\n  render() {\n    let estados = [];\n    var _this$state = this.state,\n        isLoaded = _this$state.isLoaded,\n        news = _this$state.news,\n        news_topics = _this$state.news_topics,\n        topics = _this$state.topics,\n        guardados = _this$state.guardados,\n        categoria = _this$state.categoria,\n        click = _this$state.click;\n    const localuser = '1'; // const localuser=localStorage.getItem('user');\n\n    const numberOfItems = this.state.showMore ? news.length : 3;\n\n    if (this.state.esconde) {\n      news.reverse();\n    }\n\n    if (!isLoaded) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Loading...\");\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"a_secundarymenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: this.state.click === 200 ? 'a_card_categorys_active' : 'a_card_categorys',\n        onClick: () => this.handleClick(200),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"DESTAQUE\", React.createElement(\"div\", {\n        hidden: this.state.click !== 200,\n        className: \"a_category_bolinha\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      })), categoria.map(value => {\n        const idClick = '/' + value.id;\n        return React.createElement(\"button\", {\n          className: this.state.click === value.id ? 'a_card_categorys_active' : 'a_card_categorys',\n          key: value.id,\n          id: value.id,\n          onClick: () => this.handleClick(value.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, value.category, React.createElement(\"div\", {\n          hidden: this.state.click !== value.id,\n          className: \"a_category_bolinha\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }), React.createElement(Link, {\n          to: idClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }));\n      })), React.createElement(\"div\", {\n        className: \"row a_homepage_padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, news.reverse().slice(0, numberOfItems).map((value4, key2) => {\n        if (this.state.selected == \"\" || this.state.selected == 200) {\n          let cor = \"\";\n          console.log('valueeeeeeeee', value4.guardado);\n\n          if (value4.guardado && value4.guardado.length) {\n            cor = \"guardados_branco_preenchido.svg\";\n          } else {\n            cor = \"guardados_branco_contorno.svg\";\n          }\n\n          if (key2 == 0) {\n            return React.createElement(\"div\", {\n              className: \"col-sm-12 a_homepage_destaque \",\n              key: value4.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 275\n              },\n              __self: this\n            }, this.state.arcozelo, React.createElement(Card, {\n              className: \"a_homepage_change_card\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 278\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              className: \"LinkGrid\",\n              onClick: () => {\n                this.handleSendToLink(value4);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 279\n              },\n              __self: this\n            }, React.createElement(Card.Header, {\n              className: \"a_homepage_topicos_destaque, a_homepage_change_header_destaque \",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 283\n              },\n              __self: this\n            }, value4.topicoNoticia), React.createElement(Card.Body, {\n              className: \"a_homepage_change_body\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 284\n              },\n              __self: this\n            }, React.createElement(Card.Title, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 285\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"a_homepage_titulos_destaque\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 286\n              },\n              __self: this\n            }, value4.title)), React.createElement(Card.Img, {\n              className: \"a_homepage_radius\",\n              src: require(`../images/${value4.image}`),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 288\n              },\n              __self: this\n            })))), React.createElement(\"a\", {\n              type: \"button\",\n              \"data-target\": news.id,\n              onClick: () => {\n                this.handleClicka(value4);\n              },\n              className: \"a_homepage_guardados\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 294\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              className: \"a_homepage_img_guardados\",\n              src: require(`../images/` + cor),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 294\n              },\n              __self: this\n            })));\n          } else {\n            return React.createElement(\"div\", {\n              className: \"col-sm-4 a_homepage_margem\",\n              key: value4.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 304\n              },\n              __self: this\n            }, this.state.arcozelo, React.createElement(Card, {\n              className: \"a_homepage_change_card\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 306\n              },\n              __self: this\n            }, React.createElement(Card.Header, {\n              className: \"a_homepage_news\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 308\n              },\n              __self: this\n            }, value4.topicoNoticia), React.createElement(Card.Body, {\n              className: \"a_homepage_change_body\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 309\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              className: \"LinkGrid\",\n              onClick: () => {\n                this.handleSendToLink(value4);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 310\n              },\n              __self: this\n            }, React.createElement(Card.Img, {\n              className: \"a_homepage_radius\",\n              src: require(`../images/${value4.image}`),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 313\n              },\n              __self: this\n            })), React.createElement(\"button\", {\n              onClick: () => {\n                this.handleClicka(value4);\n              },\n              className: \"a_homepage_position_news\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 316\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              className: \"a_homepage_img_guardados\",\n              src: require(`../images/` + cor),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 316\n              },\n              __self: this\n            }))), React.createElement(\"a\", {\n              href: value4.url,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 321\n              },\n              __self: this\n            }, React.createElement(Card.Title, {\n              className: \"a_homepage_margin_title\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 322\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"a_homepage_titulos\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 323\n              },\n              __self: this\n            }, value4.title)))));\n          }\n        } else {\n          return this.state.noticias.reverse().slice(0, numberOfItems).map((value5, key) => {\n            let cor2 = \"\";\n\n            if (value4.guardado && value4.guardado.length) {\n              cor2 = \"guardados_branco_preenchido.svg\";\n            } else {\n              cor2 = \"guardados_branco_contorno.svg\";\n            }\n\n            if (key2 == 0) {\n              return React.createElement(\"div\", {\n                className: \"col-sm-4 a_homepage_margem\",\n                key: value5.id,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 346\n                },\n                __self: this\n              }, this.state.arcozelo, React.createElement(Card, {\n                className: \"a_homepage_change_card\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 348\n                },\n                __self: this\n              }, React.createElement(Card.Header, {\n                className: \"a_homepage_news\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 350\n                },\n                __self: this\n              }, value5.topicoNoticia), React.createElement(Card.Body, {\n                className: \"a_homepage_change_body\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 351\n                },\n                __self: this\n              }, React.createElement(\"a\", {\n                className: \"LinkGrid\",\n                onClick: () => {\n                  this.handleSendToLink(value5);\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 352\n                },\n                __self: this\n              }, React.createElement(Card.Img, {\n                className: \"a_homepage_radius\",\n                src: require(`../images/${value5.image}`),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 355\n                },\n                __self: this\n              })), React.createElement(\"button\", {\n                onClick: () => {\n                  this.handleClicka(value5);\n                },\n                className: \"a_homepage_position_news\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 358\n                },\n                __self: this\n              }, React.createElement(\"img\", {\n                className: \"a_homepage_img_guardados\",\n                src: require(`../images/` + cor2),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 358\n                },\n                __self: this\n              }))), React.createElement(\"a\", {\n                href: value5.url,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 363\n                },\n                __self: this\n              }, React.createElement(Card.Title, {\n                className: \"a_homepage_margin_title\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 364\n                },\n                __self: this\n              }, React.createElement(\"div\", {\n                className: \"a_homepage_titulos\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 365\n                },\n                __self: this\n              }, value5.title)))));\n            }\n          });\n        }\n      }), React.createElement(\"button\", {\n        id: \"botaoVerMais\",\n        className: \"VerMaisBtn\",\n        onClick: () => this.handleClickVerMais(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Ver mais\")));\n    }\n  }\n\n}\n\nexport default ListNewsGrid;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/components/ListNewsGrid.js"],"names":["React","Component","useState","Redirect","Link","HomePage_styles","Card","CardDeck","Button","container","row","col","axios","GridSecondaryNavigation","recombee","Modal","findAllByDisplayValue","ReactHooks","ListNewsGrid","constructor","props","_isMounted","state","news","news_topics","topics","guardados","isLoaded","categoria","click","btn","showMore","esconde","selected","noticias","isLoaded2","rita","collections","arcozelo","ativo","aviso","handleClick","bind","handleClicka","handleClickVerMais","handleSendToLink","handleClose","setState","console","log","handleClickColecao","noticiaid","colecaoid","event","localUser","localStorage","getItem","client","ApiClient","post","news_id","user_id","collection_id","then","response","send","AddCartAddition","res","catch","error","noticiaEspecial","id","userEu","guardado","length","delete","data","window","location","reload","map","value3","collection","charAt","noticiaId","AddPurchase","document","getElementById","style","display","btnid","Promise","all","res1","componentDidMount","res5","res3","render","estados","localuser","numberOfItems","reverse","value","idClick","category","slice","value4","key2","cor","topicoNoticia","title","require","image","url","value5","key","cor2"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { HomePage_styles } from '../css/HomePage.css';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport CardDeck from \"react-bootstrap/CardDeck\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { container, row, col } from \"reactstrap\";\r\nimport axios from 'axios';\r\nimport GridSecondaryNavigation from './GridSecondaryNavigation'\r\nimport recombee from 'recombee-js-api-client';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { findAllByDisplayValue } from '@testing-library/react';\r\nimport ReactHooks from 'eslint-plugin-react-hooks'\r\n\r\nclass ListNewsGrid extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this._isMounted = false;\r\n        this.state = {\r\n            news: [],\r\n            news_topics: [],\r\n            topics: [],\r\n            guardados: [],\r\n            isLoaded: false,\r\n            categoria: [],\r\n            click: 200,\r\n            btn: [],\r\n            showMore: false,\r\n            esconde: false,\r\n            selected: \"\",\r\n            noticias: [],\r\n            isLoaded2: false,\r\n            rita: 0,\r\n            collections: [],\r\n            arcozelo: <div></div>,\r\n            ativo: false,\r\n            aviso: ''\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClicka = this.handleClicka.bind(this);\r\n        this.handleClickVerMais = this.handleClickVerMais.bind(this);\r\n        this.handleSendToLink = this.handleSendToLink.bind(this);\r\n\r\n\r\n    }\r\n    handleClose() {\r\n        this.setState({\r\n            ativo: false\r\n        })\r\n        console.log(this.state.ativo)\r\n    }\r\n\r\n    handleClickColecao(noticiaid,colecaoid,event){\r\n\r\n        console.log('noticiaid: ', noticiaid);\r\n        console.log('colecaoid: ', colecaoid);\r\n        const localUser = localStorage.getItem('user');\r\n        console.log('user', localUser);\r\n        var client = new recombee.ApiClient('atenas-atenas-novo', '61Z8UGxxGFlTmuMtE3uUixd0ofZIlefQk68LTUXd2pzExiDtTgUOhSffYoUFmLQB');\r\n \r\n \r\n        // vai ter de duas coisas:\r\n        // 1. guardar na BD, na tabela news_users, o noticiaId e o coleçaoID\r\n        axios.post('api/newsUser', {\r\n            news_id: noticiaid,\r\n            user_id: localUser,\r\n            collection_id: colecaoid\r\n        })\r\n            .then(response => {\r\n                console.log('resposta:', response);\r\n \r\n                // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\r\n                client.send(new recombee.AddCartAddition(\r\n                    localUser,\r\n                    noticiaid,\r\n                    {\r\n                        'cascadeCreate': true\r\n                    })).then(res => {\r\n                    console.log(res);\r\n                    //window.location.href='';\r\n                    this.setState({aviso: 'Notícia guardada com sucesso'});\r\n                    //window.alert('Notícia Guardada');\r\n                    /*setTimeout(()=>{\r\n                        // o que vai fazer é fechar a janela\r\n                        //window.location.href='';\r\n                    },1000);*/\r\n                });\r\n                console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\r\n            })\r\n            .catch(error => {\r\n                console.log('erro: ', error.response);\r\n            });\r\n    }\r\n    handleClicka(event) {\r\n       \r\n\r\n        console.log('here--->', event);\r\n        //console.log(event.id);\r\n        const noticiaEspecial = event.id;\r\n        console.log('Noticia Clicada', noticiaEspecial);\r\n\r\n        const userEu = localStorage.getItem('user');\r\n        console.log(userEu);\r\n        console.log('veer se ele existe', event.guardado)\r\n        if (event.guardado && event.guardado.length) {\r\n            axios.delete('api/newsUser/' + event.guardado[0].id)\r\n                .then(res => {\r\n                    console.log(res.data);\r\n                    window.location.reload();\r\n                });\r\n\r\n        } else {\r\n            console.log('vais adicionar! MOSTRAR A MODAL!', this.state.collections);\r\n            \r\n            this.setState({\r\n                ativo: true,\r\n                arcozelo: (\r\n                    <Modal show={true}>\r\n                <Modal.Dialog>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>Modal title</Modal.Title>\r\n                    </Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                <p>{event.id}</p>\r\n                {this.state.collections.map((value3) => {\r\n                if (value3.user_id == userEu) {\r\n                        if (this.state.aviso==\"\") {\r\n                        return(\r\n                            <Button onClick={()=>{this.handleClickColecao(event.id, value3.id)}}><span>{value3.collection.charAt(0)}</span><span>{value3.collection}</span></Button>\r\n                        )\r\n                        } else {\r\n                        return <div>{this.state.aviso}</div>\r\n                        }\r\n                  \r\n                    }\r\n                })}\r\n                    </Modal.Body>\r\n\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\">Close</Button>\r\n                        <Button variant=\"primary\">Save changes</Button>\r\n                    </Modal.Footer>\r\n                </Modal.Dialog>\r\n                </Modal>\r\n                )\r\n            })\r\n            \r\n\r\n            \r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n    handleSendToLink(event) {\r\n        const userEu = localStorage.getItem('user');\r\n        const noticiaId = event.id;\r\n        var client = new recombee.ApiClient('atenas-atenas-novo', '61Z8UGxxGFlTmuMtE3uUixd0ofZIlefQk68LTUXd2pzExiDtTgUOhSffYoUFmLQB');\r\n\r\n        console.log(noticiaId, '--> vai ser a noticia');\r\n        console.log(userEu, '--> vai ser o user');\r\n        console.log(event, '--> evento');\r\n\r\n        client.send(new recombee.AddPurchase(\r\n            userEu,\r\n            noticiaId,\r\n            {\r\n                'cascadeCreate': true\r\n            }))\r\n            .then(res => {\r\n                console.log(res);\r\n                console.log('Noticia Visitada --> Compra feita');\r\n                //window.location.href = event.url;\r\n            });\r\n\r\n\r\n    }\r\n    handleClickVerMais() {\r\n        this.setState({ showMore: true, esconde: true });\r\n        document.getElementById(\"botaoVerMais\").style.display = \"none\";\r\n\r\n\r\n    }\r\n    handleClick(btnid) {\r\n        this.setState({ click: btnid, selected: btnid });\r\n        console.log('selecionaddo', this.state.selected);\r\n        Promise.all([axios('api/newsCategory/' + localStorage.getItem('user') + '/' + btnid)])\r\n\r\n            .then(([res1]) => {\r\n                return Promise.all([res1])\r\n            })\r\n\r\n            .then(([res1]) => {\r\n                console.log('respostinha', res1);\r\n\r\n                this.setState({\r\n                    isLoaded2: true,\r\n                    noticias: res1.data.data\r\n                })\r\n            });\r\n    }\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n        if (this._isMounted) {\r\n            Promise.all([axios('api/newsAll/' + localStorage.getItem('user')), axios('api/category'), axios('api/collection')])\r\n                .then(([res1, res5, res3]) => {\r\n                    return Promise.all([res1, res5, res3])\r\n                })\r\n                .then(([res1, res5, res3]) => {\r\n                    this.setState({\r\n                        isLoaded: true,\r\n                        news: res1.data.data,\r\n                        categoria: res5.data.data,\r\n                        collections: res3.data.data\r\n                    })\r\n                });\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let estados = [];\r\n        var { isLoaded, news, news_topics, topics, guardados, categoria, click } = this.state;\r\n        const localuser = '1';\r\n        // const localuser=localStorage.getItem('user');\r\n        const numberOfItems = this.state.showMore ? news.length : 3;\r\n\r\n        if (this.state.esconde) {\r\n            news.reverse();\r\n        }\r\n        if (!isLoaded) {\r\n            return <div>Loading...</div>\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <div className=\"a_secundarymenu\">\r\n                        <button className={this.state.click === 200 ? 'a_card_categorys_active' : 'a_card_categorys'} onClick={() => this.handleClick(200)}>\r\n                            DESTAQUE\r\n                        <div hidden={this.state.click !== 200} className=\"a_category_bolinha\"></div>\r\n                        </button>\r\n                        {categoria.map((value) => {\r\n\r\n                            const idClick = '/' + value.id;\r\n                            return (\r\n                                <button className={this.state.click === value.id ? 'a_card_categorys_active' : 'a_card_categorys'} key={value.id} id={value.id} onClick={() => this.handleClick(value.id)}>\r\n                                    {value.category}\r\n\r\n                                    <div hidden={this.state.click !== value.id} className=\"a_category_bolinha\"></div>\r\n                                    <Link to={idClick} />\r\n                                </button>\r\n                            )\r\n                        })\r\n                        }\r\n                    </div>\r\n                    <div className='row a_homepage_padding'>\r\n\r\n                        {\r\n\r\n                            news.reverse().slice(0, numberOfItems).map((value4, key2) => {\r\n                                if (this.state.selected == \"\" || this.state.selected == 200) {\r\n                                    let cor = \"\";\r\n                                    console.log('valueeeeeeeee', value4.guardado)\r\n                                    if (value4.guardado && value4.guardado.length) {\r\n                                        cor = \"guardados_branco_preenchido.svg\"\r\n                                    } else {\r\n                                        cor = \"guardados_branco_contorno.svg\"\r\n                                    }\r\n\r\n                                    if (key2 == 0) {\r\n                                        return (\r\n                                            <div className='col-sm-12 a_homepage_destaque ' key={value4.id}>\r\n                                                {this.state.arcozelo}      \r\n\r\n                                                <Card className='a_homepage_change_card'>\r\n                                                    <a className=\"LinkGrid\" onClick={() => {\r\n                                                        this.handleSendToLink(value4)\r\n                                                    }}>\r\n\r\n                                                        <Card.Header className='a_homepage_topicos_destaque, a_homepage_change_header_destaque '>{value4.topicoNoticia}</Card.Header>\r\n                                                        <Card.Body className='a_homepage_change_body'>\r\n                                                            <Card.Title>\r\n                                                                <div className='a_homepage_titulos_destaque'>{value4.title}</div>\r\n                                                            </Card.Title>\r\n                                                            <Card.Img className='a_homepage_radius'\r\n                                                                src={require(`../images/${value4.image}`)} />\r\n                                                        </Card.Body>\r\n\r\n                                                    </a>\r\n                                                </Card>\r\n                                                <a type='button' data-target={news.id} onClick={() => { this.handleClicka(value4) }} className='a_homepage_guardados'><img\r\n                                                    className='a_homepage_img_guardados'\r\n                                                    src={require(`../images/` + cor)} /></a>\r\n                                            </div>\r\n\r\n                                        )\r\n\r\n                                    } else {\r\n\r\n                                        return (\r\n                                            <div className='col-sm-4 a_homepage_margem' key={value4.id}>\r\n                                                {this.state.arcozelo}\r\n                                                <Card className='a_homepage_change_card'>\r\n\r\n                                                    <Card.Header className='a_homepage_news'>{value4.topicoNoticia}</Card.Header>\r\n                                                    <Card.Body className='a_homepage_change_body'>\r\n                                                        <a className=\"LinkGrid\" onClick={() => {\r\n                                                            this.handleSendToLink(value4)\r\n                                                        }}>\r\n                                                            <Card.Img className='a_homepage_radius'\r\n                                                                src={require(`../images/${value4.image}`)} />\r\n                                                        </a>\r\n                                                        <button onClick={() => { this.handleClicka(value4) }} className='a_homepage_position_news'><img\r\n                                                            className='a_homepage_img_guardados'\r\n                                                            src={require(`../images/` + cor)} />\r\n                                                        </button>\r\n                                                    </Card.Body>\r\n                                                    <a href={value4.url}>\r\n                                                        <Card.Title className='a_homepage_margin_title'>\r\n                                                            <div className='a_homepage_titulos'>{value4.title}</div>\r\n                                                        </Card.Title>\r\n                                                    </a>\r\n\r\n                                                </Card>\r\n\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n\r\n\r\n                                } else {\r\n                                    return (\r\n\r\n                                        this.state.noticias.reverse().slice(0, numberOfItems).map((value5, key) => {\r\n                                            let cor2 = \"\";\r\n                                            if (value4.guardado && value4.guardado.length) {\r\n                                                cor2 = \"guardados_branco_preenchido.svg\"\r\n                                            } else {\r\n                                                cor2 = \"guardados_branco_contorno.svg\"\r\n                                            }\r\n                                            if (key2 == 0) {\r\n                                                return (\r\n                                                    <div className='col-sm-4 a_homepage_margem' key={value5.id}>\r\n                                                        {this.state.arcozelo}\r\n                                                        <Card className='a_homepage_change_card'>\r\n\r\n                                                            <Card.Header className='a_homepage_news'>{value5.topicoNoticia}</Card.Header>\r\n                                                            <Card.Body className='a_homepage_change_body'>\r\n                                                                <a className=\"LinkGrid\" onClick={() => {\r\n                                                                    this.handleSendToLink(value5)\r\n                                                                }}>\r\n                                                                    <Card.Img className='a_homepage_radius'\r\n                                                                        src={require(`../images/${value5.image}`)} />\r\n                                                                </a>\r\n                                                                <button onClick={() => { this.handleClicka(value5) }} className='a_homepage_position_news'><img\r\n                                                                    className='a_homepage_img_guardados'\r\n                                                                    src={require(`../images/` + cor2)} />\r\n                                                                </button>\r\n                                                            </Card.Body>\r\n                                                            <a href={value5.url}>\r\n                                                                <Card.Title className='a_homepage_margin_title'>\r\n                                                                    <div className='a_homepage_titulos'>{value5.title}</div>\r\n                                                                </Card.Title>\r\n                                                            </a>\r\n\r\n                                                        </Card>\r\n\r\n                                                    </div>\r\n                                                )\r\n                                            }\r\n                                        })\r\n                                    )\r\n                                }\r\n                            })\r\n                        }\r\n\r\n                        <button id='botaoVerMais' className='VerMaisBtn' onClick={() => this.handleClickVerMais()}>Ver mais</button>\r\n                    </div>\r\n                </div>\r\n            )\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default ListNewsGrid;"]},"metadata":{},"sourceType":"module"}