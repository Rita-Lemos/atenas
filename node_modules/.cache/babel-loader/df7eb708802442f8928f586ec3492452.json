{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\views\\\\RegisterView.js\";\n//Registo (imagem, nome, email e password)\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport login from '../css/register.css';\n\nclass RegisterView extends Component {\n  constructor() {\n    super();\n    this.state = {\n      image: '',\n      email: '',\n      username: '',\n      password: '',\n      loggedIn: false,\n      msgErroEmail: \"\",\n      msgErroUser: \"\",\n      msgErroPass: \"\",\n      bigError: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleBlurUser = this.handleBlurUser.bind(this);\n    this.handleBlurPass = this.handleBlurPass.bind(this);\n  }\n\n  handleBlurPass(event) {\n    let value = event.target.value;\n\n    if (value.length >= 30) {\n      this.setState({\n        msgErroPass: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, \"Password demasiado longa!\")\n      });\n    }\n\n    if (value.length <= 8) {\n      this.setState({\n        msgErroPass: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, \"Password demasiado curta!\")\n      });\n\n      if (value == \"\") {\n        this.setState({\n          msgErroPass: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            },\n            __self: this\n          }, \"Preencha a password!\")\n        });\n      }\n    }\n  }\n\n  handleBlurUser(event) {\n    let value = event.target.value;\n\n    if (value == \"\") {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, \"Preencha o nome!\")\n      });\n    }\n\n    if (value.length >= 30) {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, \"Nome demasiado longo!\")\n      });\n    }\n\n    let format = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/;\n\n    if (format.test(value) == true) {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, \"Nome demasiado longo!\")\n      });\n    }\n  }\n\n  handleBlur(event) {\n    let value = event.target.value;\n    axios.get('/api/users').then(response => {\n      let emails = response.data.data;\n      emails.map(mail => {\n        if (mail.email == value) {\n          this.setState({\n            msgErroEmail: React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74\n              },\n              __self: this\n            }, \"Email j\\xE1 registado!\")\n          });\n        }\n      });\n    });\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (!re.test(value)) {\n      this.setState({\n        msgErroEmail: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Email inv\\xE1lido!\")\n      });\n\n      if (value == \"\") {\n        this.setState({\n          msgErroEmail: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, \"Preencha o email!\")\n        });\n      }\n    }\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    console.log('handle', name, value);\n    let data = {};\n    data[name] = value;\n    this.setState({\n      msgErroEmail: \"\",\n      msgErroUser: \"\",\n      msgErroPass: \"\"\n    });\n    this.setState(data);\n  }\n\n  onChange(e) {\n    let files = e.target.files; //console.warn('data file', files);\n\n    let reader = new FileReader();\n    reader.readAsDataURL(files[0]);\n\n    reader.onload = e => {\n      this.setState({\n        image: e.target.result\n      });\n      console.warn('img data', this.state.image);\n      window.axios.post('/api/register', {\n        image: e.target.result\n      }).then(response => {\n        console.log('resposta', response);\n      }).catch(error => {\n        console.log('erro', error.response);\n      });\n    };\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      window.location.href = \"/main\";\n    }\n\n    if (localStorage.getItem('user')) {\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      id: \"RegisterPage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"FormRegisto\",\n      onSubmit: this.onFormSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"UserRegisto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"ImgUserRegisto\",\n      src: require('../images/man-user.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"file\",\n      id: \"file\",\n      className: \"inputfile\",\n      name: \"image\",\n      value: this.state.image,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Choose a file\")), React.createElement(\"div\", {\n      className: \"TodosInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/user_total_preenchido .svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"text\",\n      name: \"username\",\n      value: this.state.username,\n      placeholder: \"username\",\n      onChange: this.onChange2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/email.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"text\",\n      name: \"email\",\n      value: this.state.email,\n      placeholder: \"email\",\n      onChange: this.onChange2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/password.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      placeholder: \"password\",\n      onChange: this.onChange2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/password.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"password\",\n      placeholder: \"confirmar pass\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }))), React.createElement(\"input\", {\n      className: \"RegistoBtn\",\n      type: \"submit\",\n      value: \"seguinte\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    })));\n  }\n\n  submit(e) {\n    e.preventDefault();\n    window.axios.post('/api/register', {\n      email: this.state.email,\n      username: this.state.username,\n      password: this.state.password,\n      image: this.state.image,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }, {}).then(response => {\n      console.log('resposta', response); //console.log(response.data.data.access_token);\n\n      this.setState({\n        loggedIn: true\n      }); //console.log('token', response.data.data.access_token)\n\n      localStorage.setItem('user', response.data.user.id);\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      });\n    }).catch(error => {\n      console.log('erro', error);\n      this.setState({\n        bigError: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"Registo inv\\xE1lido! Tente novamente.\")\n      });\n    });\n  }\n\n}\n\nexport default RegisterView;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/views/RegisterView.js"],"names":["React","Component","ReactDOM","axios","Redirect","login","RegisterView","constructor","state","image","email","username","password","loggedIn","msgErroEmail","msgErroUser","msgErroPass","bigError","handleChange","bind","submit","handleBlur","handleBlurUser","handleBlurPass","event","value","target","length","setState","format","test","get","then","response","emails","data","map","mail","re","name","console","log","onChange","e","files","reader","FileReader","readAsDataURL","onload","result","warn","window","post","catch","error","render","location","href","localStorage","getItem","onFormSubmit","require","onChange2","preventDefault","headers","setItem","user","id"],"mappings":"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","sourcesContent":["//Registo (imagem, nome, email e password)\r\nimport React, {Component} from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport login from '../css/register.css'\r\n\r\nclass RegisterView extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            image: '',\r\n            email: '',\r\n            username: '',\r\n            password: '',\r\n            loggedIn: false,\r\n            msgErroEmail: \"\",\r\n            msgErroUser: \"\",\r\n            msgErroPass: \"\",\r\n            bigError: \"\",\r\n        }\r\n        this.handleChange=this.handleChange.bind(this);\r\n        this.submit=this.submit.bind(this);\r\n        this.handleBlur=this.handleBlur.bind(this);\r\n        this.handleBlurUser=this.handleBlurUser.bind(this);\r\n        this.handleBlurPass=this.handleBlurPass.bind(this);\r\n    }\r\n    handleBlurPass(event) {\r\n        let value = event.target.value;\r\n        if (value.length>=30) {\r\n            this.setState({\r\n                msgErroPass: <div>Password demasiado longa!</div>,\r\n            })\r\n        }\r\n        if (value.length<=8) {\r\n            this.setState({\r\n                msgErroPass: <div>Password demasiado curta!</div>,\r\n            })\r\n            if (value==\"\") {\r\n                this.setState({\r\n                    msgErroPass: <div>Preencha a password!</div>,\r\n                })\r\n            }\r\n        }\r\n    }\r\n    handleBlurUser(event) {\r\n        let value = event.target.value;\r\n        if (value==\"\") {\r\n            this.setState({\r\n                msgErroUser: <div>Preencha o nome!</div>,\r\n            })\r\n        }\r\n        if (value.length>=30) {\r\n            this.setState({\r\n                msgErroUser: <div>Nome demasiado longo!</div>,\r\n            })\r\n        }\r\n        let format = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/;\r\n        if((format.test(value)) == true) {\r\n            \r\n            this.setState({\r\n                msgErroUser: <div>Nome demasiado longo!</div>,\r\n            })\r\n        }\r\n    }\r\n    handleBlur(event) {\r\n        let value = event.target.value;\r\n        axios.get('/api/users')\r\n            .then(response=>{\r\n                let emails = response.data.data;\r\n                emails.map((mail) => {\r\n                    if (mail.email==value) {\r\n                        this.setState({\r\n                            msgErroEmail: <div>Email já registado!</div>,\r\n                        })\r\n                    }\r\n                })\r\n        })\r\n        let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if ( !re.test(value) ) {\r\n            this.setState({\r\n                msgErroEmail: <div>Email inválido!</div>,\r\n            })\r\n            if (value==\"\") {\r\n                this.setState({\r\n                    msgErroEmail: <div>Preencha o email!</div>,\r\n                })\r\n            } \r\n        } \r\n    }\r\n    handleChange(event) {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        console.log('handle',name, value);\r\n        let data = {};\r\n        data[name] = value;\r\n        this.setState({\r\n            msgErroEmail: \"\",\r\n            msgErroUser: \"\",\r\n            msgErroPass: \"\"\r\n        })\r\n        this.setState(data);\r\n    }\r\n    onChange(e) {\r\n        let files = e.target.files;\r\n        //console.warn('data file', files);\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(files[0]);\r\n        \r\n        reader.onload = (e) => {\r\n            this.setState({\r\n                image: e.target.result\r\n            })\r\n            console.warn('img data', this.state.image);\r\n            window.axios.post('/api/register',\r\n            {   \r\n                image: e.target.result,\r\n            }).then(\r\n                response=> {\r\n                    console.log('resposta', response)\r\n                }\r\n            ).catch(error => {\r\n                console.log('erro',error.response);\r\n            })\r\n        }\r\n        \r\n    }\r\n    render() {\r\n        if (this.state.loggedIn) {\r\n            window.location.href = \"/main\";\r\n        }\r\n        if(localStorage.getItem('user')) {\r\n            return <Redirect to='/main' />;\r\n        }\r\n        return (\r\n            <div id=\"RegisterPage\">\r\n\r\n                <form className=\"FormRegisto\" onSubmit={this.onFormSubmit} >\r\n                    <div className=\"UserRegisto\">\r\n                        <img className=\"ImgUserRegisto\" src={require('../images/man-user.svg')}/>\r\n                        <input type=\"file\" id=\"file\" className=\"inputfile\" name=\"image\" value={this.state.image} onChange={this.onChange} />\r\n                        <label htmlFor=\"file\">Choose a file</label>\r\n                    </div>\r\n                    <div className=\"TodosInput\">\r\n                    <div className=\"DivInput\">\r\n                        <img className=\"IconesInput\" src={require('../images/user_total_preenchido .svg')}/>\r\n                        <input className=\"InputsRegisto\" type=\"text\" name=\"username\" value={this.state.username} placeholder=\"username\" onChange={this.onChange2} />\r\n                    </div>\r\n\r\n                    <div className=\"DivInput\">\r\n                        <img className=\"IconesInput\" src={require('../images/email.svg')}/>\r\n                        <input className=\"InputsRegisto\" type=\"text\" name=\"email\" value={this.state.email} placeholder=\"email\" onChange={this.onChange2} />\r\n                    </div>\r\n\r\n                    <div className=\"DivInput\">\r\n                        <img className=\"IconesInput\" src={require('../images/password.svg')}/>\r\n                        <input className=\"InputsRegisto\" type=\"password\" name=\"password\" value={this.state.password} placeholder=\"password\" onChange={this.onChange2} />\r\n                    </div>\r\n\r\n                    <div className=\"DivInput\">\r\n                        <img className=\"IconesInput\" src={require('../images/password.svg')}/>\r\n                        <input className=\"InputsRegisto\" type=\"password\" placeholder=\"confirmar pass\" />\r\n                    </div>\r\n                    </div>\r\n                    <input className=\"RegistoBtn\" type=\"submit\" value=\"seguinte\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n    submit(e) {\r\n        e.preventDefault();\r\n        window.axios.post('/api/register',\r\n        {   email: this.state.email,\r\n            username: this.state.username,\r\n            password: this.state.password,\r\n            image: this.state.image,\r\n            headers:{\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        },{\r\n           \r\n        })\r\n        .then(response=>{\r\n            console.log('resposta',response);\r\n            //console.log(response.data.data.access_token);\r\n            this.setState({loggedIn: true});\r\n            //console.log('token', response.data.data.access_token)\r\n            localStorage.setItem('user', response.data.user.id);\r\n            return <Redirect to='/main' />;\r\n        })\r\n        .catch(error => {\r\n            console.log('erro',error);\r\n            this.setState({bigError: <div>Registo inválido! Tente novamente.</div>});\r\n        })\r\n        ;\r\n    }\r\n}\r\n\r\nexport default RegisterView;\r\n"]},"metadata":{},"sourceType":"module"}