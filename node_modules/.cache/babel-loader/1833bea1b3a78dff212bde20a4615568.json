{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\views\\\\RegisterView.js\";\n//Registo (imagem, nome, email e password)\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport login from '../css/register.css';\nimport uri from \"../images/man-user.svg\";\n\nclass RegisterView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: null,\n      email: '',\n      username: '',\n      password: '',\n      msgErroEmail: \"\",\n      msgErroUser: \"\",\n      msgErroPass: \"\",\n      msgErroPass2: \"\",\n      bigError: \"\",\n      file: '',\n      imagePreviewUrl: ''\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onChange2 = this.onChange2.bind(this);\n    this.fileUpload = this.fileUpload.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleBlurUser = this.handleBlurUser.bind(this);\n    this.handleBlurPass = this.handleBlurPass.bind(this);\n    this.handleBlurPass2 = this.handleBlurPass2.bind(this);\n  }\n\n  handleBlurPass2(event) {\n    let value = event.target.value;\n    this.setState({\n      msgErroPass2: \"\"\n    });\n\n    if (value == \"\") {\n      this.setState({\n        msgErroPass2: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, \"Confirme a password!\"))\n      });\n    }\n\n    if (this.state.password != value) {\n      this.setState({\n        msgErroPass2: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, \"Password diferente!\"))\n      });\n    }\n  }\n\n  handleBlurPass(event) {\n    let value = event.target.value;\n    this.setState({\n      msgErroPass: \"\"\n    });\n\n    if (value.length >= 30) {\n      this.setState({\n        msgErroPass: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, \"Password demasiado longa!\"))\n      });\n    }\n\n    if (value.length <= 8) {\n      this.setState({\n        msgErroPass: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, \"Password demasiado curta!\"))\n      });\n\n      if (value == \"\") {\n        this.setState({\n          msgErroPass: React.createElement(\"div\", {\n            className: \"a_Validacao\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, \"Preencha a password!\"))\n        });\n      }\n    }\n  }\n\n  handleBlurUser(event) {\n    let value = event.target.value;\n    this.setState({\n      msgErroUser: \"\"\n    });\n\n    if (value == \"\") {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Preencha o nome!\"))\n      });\n    }\n\n    if (value.length >= 30) {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Nome demasiado longo!\"))\n      });\n    }\n\n    let format = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/;\n\n    if (format.test(value) == true) {\n      this.setState({\n        msgErroUser: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"Nome demasiado longo!\"))\n      });\n    }\n  }\n\n  handleBlur(event) {\n    let value = event.target.value;\n    this.setState({\n      msgErroEmail: \"\"\n    });\n    axios.get('/api/users').then(response => {\n      let emails = response.data.data;\n      emails.map(mail => {\n        if (mail.email == value) {\n          this.setState({\n            msgErroEmail: React.createElement(\"div\", {\n              className: \"a_Validacao\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106\n              },\n              __self: this\n            }, React.createElement(\"b\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106\n              },\n              __self: this\n            }, \"Email j\\xE1 registado!\"))\n          });\n        }\n      });\n    });\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (!re.test(value)) {\n      this.setState({\n        msgErroEmail: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Email inv\\xE1lido!\"))\n      });\n\n      if (value == \"\") {\n        this.setState({\n          msgErroEmail: React.createElement(\"div\", {\n            className: \"a_Validacao\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }, React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }, \"Preencha o email!\"))\n        });\n      }\n    }\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault();\n    this.fileUpload(this.state.file);\n  }\n\n  onChange(e) {\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  onChange2(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    console.log('handle', name, value);\n    let data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  handleSeguinte() {\n    window.location.href = \"/personalizationcategory\";\n  }\n\n  fileUpload(file) {\n    let data = new FormData();\n    data.append('image', file);\n    data.append('email', this.state.email);\n    data.append('username', this.state.username);\n    data.append('password', this.state.password);\n    console.log(this.state.email);\n    axios.post('/api/register', data, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      console.log('file upload response', response);\n      localStorage.setItem('user', response.data.user.id);\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      });\n    }).catch(error => {\n      console.log('erro', error);\n      this.setState({\n        bigError: React.createElement(\"div\", {\n          className: \"a_Validacao\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, \"Registo inv\\xE1lido!\"), \" \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }), \"Tente novamente.\")\n      });\n    });\n  }\n\n  render() {\n    let imagePreviewUrl = this.state.imagePreviewUrl;\n    let imagePreview = null;\n\n    if (imagePreviewUrl) {\n      imagePreview = React.createElement(\"img\", {\n        className: \"ImgUserRegisto\",\n        src: imagePreviewUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      });\n    } else {\n      imagePreview = React.createElement(\"img\", {\n        className: \"ImgUserRegisto\",\n        src: uri,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.loggedIn) {\n      window.location.href = \"/main\";\n    }\n\n    if (localStorage.getItem('user')) {\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.bigError) {\n      {\n        this.state.bigError;\n      }\n    } else {\n      window.location.href = \"/personalizationcategory\";\n    }\n\n    return React.createElement(\"div\", {\n      id: \"RegisterPage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"FormRegisto\",\n      onSubmit: this.onFormSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"UserRegisto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, imagePreview, React.createElement(\"input\", {\n      type: \"file\",\n      id: \"file\",\n      className: \"inputfile\",\n      name: \"image\",\n      value: this.state.image,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Choose a file\")), React.createElement(\"div\", {\n      className: \"TodosInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/user_total_preenchido .svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"text\",\n      name: \"username\",\n      value: this.state.username,\n      placeholder: \"username\",\n      onChange: this.onChange2,\n      onBlur: this.handleBlurUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), this.state.msgErroUser, React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/email.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"text\",\n      name: \"email\",\n      value: this.state.email,\n      placeholder: \"email\",\n      onChange: this.onChange2,\n      onBlur: this.handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })), this.state.msgErroEmail, React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/password.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      placeholder: \"password\",\n      onChange: this.onChange2,\n      onBlur: this.handleBlurPass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    })), this.state.msgErroPass, React.createElement(\"div\", {\n      className: \"DivInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"IconesInput\",\n      src: require('../images/password.svg'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"InputsRegisto\",\n      type: \"password\",\n      placeholder: \"confirmar pass\",\n      onBlur: this.handleBlurPass2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })), this.state.msgErroPass2), this.state.bigError, React.createElement(\"input\", {\n      className: \"RegistoBtn\",\n      type: \"submit\",\n      value: \"seguinte\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default RegisterView;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/views/RegisterView.js"],"names":["React","Component","ReactDOM","axios","Redirect","login","RegisterView","constructor","props","state","file","email","username","password","msgErroEmail","msgErroUser","msgErroPass","msgErroPass2","bigError","imagePreviewUrl","onFormSubmit","bind","onChange","onChange2","fileUpload","handleBlur","handleBlurUser","handleBlurPass","handleBlurPass2","event","value","target","setState","length","format","test","get","then","response","emails","data","map","mail","re","e","preventDefault","reader","FileReader","files","onloadend","result","readAsDataURL","name","console","log","handleSeguinte","window","location","href","FormData","append","post","headers","localStorage","setItem","user","id","catch","error","render","imagePreview","uri","loggedIn","getItem","image","require"],"mappings":"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","sourcesContent":["//Registo (imagem, nome, email e password)\r\nimport React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport login from '../css/register.css'\r\nimport uri from '../images/man-user.svg';\r\n\r\nclass RegisterView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            file: null,\r\n            email: '',\r\n            username: '',\r\n            password: '',\r\n            msgErroEmail: \"\",\r\n            msgErroUser: \"\",\r\n            msgErroPass: \"\",\r\n            msgErroPass2: \"\",\r\n            bigError: \"\",\r\n            file: '',\r\n            imagePreviewUrl: ''\r\n        };\r\n        this.onFormSubmit = this.onFormSubmit.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onChange2 = this.onChange2.bind(this);\r\n        this.fileUpload = this.fileUpload.bind(this);\r\n        this.handleBlur = this.handleBlur.bind(this);\r\n        this.handleBlurUser = this.handleBlurUser.bind(this);\r\n        this.handleBlurPass = this.handleBlurPass.bind(this);\r\n        this.handleBlurPass2 = this.handleBlurPass2.bind(this);\r\n\r\n    }\r\n    handleBlurPass2(event) {\r\n        let value = event.target.value;\r\n        this.setState({\r\n            msgErroPass2: \"\",\r\n        })\r\n        if (value == \"\") {\r\n            this.setState({\r\n                msgErroPass2: <div className=\"a_Validacao\"><b>Confirme a password!</b></div>,\r\n            })\r\n        }\r\n        if (this.state.password != value) {\r\n            this.setState({\r\n                msgErroPass2: <div className=\"a_Validacao\"><b>Password diferente!</b></div>,\r\n            })\r\n        }\r\n    }\r\n    handleBlurPass(event) {\r\n        let value = event.target.value;\r\n        this.setState({\r\n            msgErroPass: \"\",\r\n        })\r\n        if (value.length >= 30) {\r\n            this.setState({\r\n                msgErroPass: <div className=\"a_Validacao\"><b>Password demasiado longa!</b></div>,\r\n            })\r\n        }\r\n        if (value.length <= 8) {\r\n            this.setState({\r\n                msgErroPass: <div className=\"a_Validacao\"><b>Password demasiado curta!</b></div>,\r\n            })\r\n            if (value == \"\") {\r\n                this.setState({\r\n                    msgErroPass: <div className=\"a_Validacao\"><b>Preencha a password!</b></div>,\r\n                })\r\n            }\r\n        }\r\n    }\r\n    handleBlurUser(event) {\r\n        let value = event.target.value;\r\n        this.setState({\r\n            msgErroUser: \"\",\r\n        })\r\n        if (value == \"\") {\r\n            this.setState({\r\n                msgErroUser: <div className=\"a_Validacao\"><b>Preencha o nome!</b></div>,\r\n            })\r\n        }\r\n        if (value.length >= 30) {\r\n            this.setState({\r\n                msgErroUser: <div className=\"a_Validacao\"><b>Nome demasiado longo!</b></div>,\r\n            })\r\n        }\r\n        let format = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/;\r\n        if ((format.test(value)) == true) {\r\n\r\n            this.setState({\r\n                msgErroUser: <div className=\"a_Validacao\"><b>Nome demasiado longo!</b></div>,\r\n            })\r\n        }\r\n    }\r\n    handleBlur(event) {\r\n        let value = event.target.value;\r\n        this.setState({\r\n            msgErroEmail: \"\",\r\n        })\r\n        axios.get('/api/users')\r\n            .then(response => {\r\n                let emails = response.data.data;\r\n                emails.map((mail) => {\r\n                    if (mail.email == value) {\r\n                        this.setState({\r\n                            msgErroEmail: <div className=\"a_Validacao\"><b>Email já registado!</b></div>,\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n        let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if (!re.test(value)) {\r\n            this.setState({\r\n                msgErroEmail: <div className=\"a_Validacao\"><b>Email inválido!</b></div>,\r\n            })\r\n            if (value == \"\") {\r\n                this.setState({\r\n                    msgErroEmail: <div className=\"a_Validacao\"><b>Preencha o email!</b></div>,\r\n                })\r\n            }\r\n        }\r\n    }\r\n    onFormSubmit(e) {\r\n        e.preventDefault();\r\n        this.fileUpload(this.state.file);\r\n\r\n    }\r\n\r\n    onChange(e) {\r\n        let reader = new FileReader();\r\n        let file = e.target.files[0];\r\n\r\n        reader.onloadend = () => {\r\n            this.setState({\r\n                file: file,\r\n                imagePreviewUrl: reader.result\r\n            });\r\n        }\r\n\r\n        reader.readAsDataURL(file)\r\n    }\r\n\r\n    onChange2(event) {\r\n        let name = event.target.name;\r\n        let value = event.target.value;\r\n        console.log('handle', name, value);\r\n        let data = {};\r\n        data[name] = value;\r\n        this.setState(data);\r\n    }\r\n\r\n    handleSeguinte(){\r\n        window.location.href= \"/personalizationcategory\"\r\n    }\r\n\r\n    fileUpload(file) {\r\n        let data = new FormData();\r\n        data.append('image', file);\r\n        data.append('email', this.state.email);\r\n        data.append('username', this.state.username);\r\n        data.append('password', this.state.password);\r\n        console.log(this.state.email)\r\n        axios\r\n            .post('/api/register', data, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            })\r\n            .then(response => {\r\n                console.log('file upload response', response);\r\n                localStorage.setItem('user', response.data.user.id);\r\n                return <Redirect to='/main' />;\r\n            })\r\n            .catch(error => {\r\n                console.log('erro', error);\r\n                this.setState({ bigError: <div className=\"a_Validacao\"><b>Registo inválido!</b> <br />Tente novamente.</div> });\r\n            })\r\n            ;\r\n    }\r\n    render() {\r\n        let { imagePreviewUrl } = this.state;\r\n        let imagePreview = null;\r\n        if (imagePreviewUrl) {\r\n            imagePreview = (<img className=\"ImgUserRegisto\" src={imagePreviewUrl} />);\r\n        } else {\r\n            imagePreview = (<img className=\"ImgUserRegisto\" src={uri} />);\r\n        }\r\n        if (this.state.loggedIn) {\r\n            window.location.href = \"/main\";\r\n        }\r\n        if (localStorage.getItem('user')) {\r\n            return <Redirect to='/main' />;\r\n        }\r\n\r\n        if (this.state.bigError){\r\n            {this.state.bigError}\r\n        }else{\r\n            window.location.href= \"/personalizationcategory\"\r\n        }\r\n\r\n        return (\r\n            <div id=\"RegisterPage\">\r\n\r\n                <form className=\"FormRegisto\" onSubmit={this.onFormSubmit} >\r\n                    <div className=\"UserRegisto\">\r\n                        {imagePreview}\r\n                        <input type=\"file\" id=\"file\" className=\"inputfile\" name=\"image\" value={this.state.image} onChange={this.onChange} />\r\n                        <label htmlFor=\"file\">Choose a file</label>\r\n                    </div>\r\n                    <div className=\"TodosInput\">\r\n                        <div className=\"DivInput\">\r\n                            <img className=\"IconesInput\" src={require('../images/user_total_preenchido .svg')} />\r\n                            <input className=\"InputsRegisto\" type=\"text\" name=\"username\" value={this.state.username} placeholder=\"username\" onChange={this.onChange2} onBlur={this.handleBlurUser} />\r\n\r\n                        </div>\r\n                        {this.state.msgErroUser}\r\n                        <div className=\"DivInput\">\r\n                            <img className=\"IconesInput\" src={require('../images/email.svg')} />\r\n                            <input className=\"InputsRegisto\" type=\"text\" name=\"email\" value={this.state.email} placeholder=\"email\" onChange={this.onChange2} onBlur={this.handleBlur} />\r\n\r\n                        </div>\r\n                        {this.state.msgErroEmail}\r\n                        <div className=\"DivInput\">\r\n                            <img className=\"IconesInput\" src={require('../images/password.svg')} />\r\n                            <input className=\"InputsRegisto\" type=\"password\" name=\"password\" value={this.state.password} placeholder=\"password\" onChange={this.onChange2} onBlur={this.handleBlurPass} />\r\n\r\n                        </div>\r\n                        {this.state.msgErroPass}\r\n                        <div className=\"DivInput\">\r\n                            <img className=\"IconesInput\" src={require('../images/password.svg')} />\r\n                            <input className=\"InputsRegisto\" type=\"password\" placeholder=\"confirmar pass\" onBlur={this.handleBlurPass2} />\r\n                        </div>\r\n                        {this.state.msgErroPass2}\r\n                    </div>\r\n                    {this.state.bigError}\r\n                    <input className=\"RegistoBtn\" type=\"submit\" value=\"seguinte\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default RegisterView;\r\n"]},"metadata":{},"sourceType":"module"}