{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\components\\\\InfoUser.js\";\n//Para edição dos dados do utilizador, assim como da sua personalização\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport editar from '../css/edit.css';\nimport axios from \"axios\";\nimport PersonalizationCarouselCategory from \"./PersonalizationCarouselCategory\"; //import ModalClose from './ModalClose';\n\nexport const Logout = () => {\n  localStorage.clear();\n  window.location.href = \"/session\";\n};\n\nclass InfoUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      user: [],\n      toStoreData: []\n    };\n    this.mainCallback = this.mainCallback.bind(this);\n  }\n\n  componentDidMount() {\n    Promise.all([axios('api/users/' + localStorage.getItem('user'))]).then(([res1]) => {\n      return Promise.all([res1]);\n    }).then(([res1]) => {\n      this.setState({\n        isLoaded: true,\n        user: res1.data.data\n      });\n    });\n  }\n\n  mainCallback(clickedValue) {\n    if (clickedValue.selected && this.state.toStoreData.find(obj => obj == clickedValue.id) == undefined) {\n      this.setState({\n        toStoreData: this.state.toStoreData.concat(clickedValue.id)\n      }, () => {\n        console.log(\"todos os selected -> \", this.state.toStoreData);\n      });\n    } else if (!clickedValue.selected && this.state.toStoreData.find(obj => obj == clickedValue.id) != undefined) {\n      this.setState({\n        toStoreData: this.state.toStoreData.filter(obj => obj != clickedValue.id)\n      }, () => {\n        console.log(\"todos os selected -> \", this.state.toStoreData);\n      });\n    }\n  }\n\n  handleClicado(props) {\n    window.axios.delete('/api/removeAllForUser/' + localStorage.getItem(\"user\")).then(obj => {\n      this.state.toStoreData.map(value => {\n        window.axios.post('/api/categoryUser', {\n          category_id: value,\n          user_id: localStorage.getItem('user')\n        }).then(response => {\n          if (value === this.state.toStoreData[this.state.toStoreData.length - 1]) {\n            window.location.href = \"/main\";\n          }\n        }).catch(error => {\n          console.log(\"Error:\", error.response);\n        });\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n    document.getElementById('buttonSaveChanges').style.display = 'block';\n    setTimeout(function () {\n      document.getElementById('buttonSaveChanges').style.display = 'none';\n      window.location.href = \"/main\";\n    }.bind(this), 2000);\n  }\n\n  render() {\n    let _this$state = this.state,\n        isLoaded = _this$state.isLoaded,\n        user = _this$state.user;\n\n    if (localStorage.getItem('user') == null) {\n      return React.createElement(Redirect, {\n        to: \"/session\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      });\n    }\n\n    if (!isLoaded) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Loading...\");\n    } else {\n      console.log('USEERRRR', user.image);\n      let imagem = \"http://atenas.hopto.org/uploads/\" + user.image;\n      return React.createElement(\"div\", {\n        className: \"a_BodyEdit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"buttonSaveChanges\",\n        className: \"a_DivSave\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Alteracoes efetuadas com sucesso\")), React.createElement(\"div\", {\n        className: \"a_InfoUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"a_CloseEdit\",\n        src: require('../images/closewhite.svg'),\n        onClick: () => this.handleClicado(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"a_FotoUser\",\n        style: {\n          backgroundImage: 'url(' + imagem + ')',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"a_NomeUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, user.username)), React.createElement(\"div\", {\n        className: \"a_TextoEdit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Personaliza\\xE7\\xE3o de Conte\\xFAdos\"), React.createElement(PersonalizationCarouselCategory, {\n        callMain: this.mainCallback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"a_EditSair\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"a_BtnLogout\",\n        onClick: Logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Terminar Sess\\xE3o\")));\n    }\n  }\n\n}\n\nexport default InfoUser;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/components/InfoUser.js"],"names":["React","Component","Redirect","editar","axios","PersonalizationCarouselCategory","Logout","localStorage","clear","window","location","href","InfoUser","constructor","props","state","isLoaded","user","toStoreData","mainCallback","bind","componentDidMount","Promise","all","getItem","then","res1","setState","data","clickedValue","selected","find","obj","id","undefined","concat","console","log","filter","handleClicado","delete","map","value","post","category_id","user_id","response","length","catch","error","document","getElementById","style","display","setTimeout","render","image","imagem","require","backgroundImage","backgroundSize","backgroundPosition","username"],"mappings":"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","sourcesContent":["//Para edição dos dados do utilizador, assim como da sua personalização\r\nimport React, {Component} from 'react'\r\nimport { Redirect } from 'react-router-dom';\r\nimport editar from '../css/edit.css'\r\nimport axios from \"axios\";\r\nimport PersonalizationCarouselCategory from \"./PersonalizationCarouselCategory\";\r\n\r\n\r\n//import ModalClose from './ModalClose';\r\nexport const Logout =() => {\r\n    localStorage.clear();\r\n    window.location.href = \"/session\";\r\n}\r\n  \r\n  \r\nclass InfoUser extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n            isLoaded : false,\r\n            user: [],\r\n            toStoreData: []\r\n        }\r\n        this.mainCallback = this.mainCallback.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        Promise.all([axios('api/users/'+localStorage.getItem('user'))])\r\n\r\n            .then(([res1]) =>{\r\n                return Promise.all([res1])\r\n            })\r\n\r\n            .then(([res1]) => {\r\n                this.setState({\r\n                    isLoaded: true,\r\n                    user: res1.data.data\r\n                });\r\n\r\n            }) ;\r\n    }\r\n\r\n    mainCallback(clickedValue) {\r\n        if (clickedValue.selected && this.state.toStoreData.find(obj => obj == clickedValue.id) == undefined) {\r\n            this.setState({\r\n                toStoreData: this.state.toStoreData.concat(clickedValue.id)\r\n            },()=>{console.log(\"todos os selected -> \", this.state.toStoreData)});\r\n        }\r\n        else if (!clickedValue.selected && this.state.toStoreData.find(obj => obj == clickedValue.id) != undefined) {\r\n            this.setState({\r\n                toStoreData: this.state.toStoreData.filter(obj => obj != clickedValue.id)\r\n                \r\n            }, ()=>{console.log(\"todos os selected -> \", this.state.toStoreData)});\r\n        }\r\n    }\r\n    \r\n    handleClicado(props){\r\n        window.axios.delete('/api/removeAllForUser/'+ localStorage.getItem(\"user\"))\r\n        .then(obj=>{\r\n            this.state.toStoreData.map((value) => {\r\n                window.axios.post('/api/categoryUser', {\r\n                    category_id: value,\r\n                    user_id: localStorage.getItem('user')\r\n                }).then(response => {\r\n                    if (value === this.state.toStoreData[this.state.toStoreData.length - 1]) {\r\n                        window.location.href = \"/main\";\r\n                    }\r\n                }).catch(error => {\r\n                    console.log(\"Error:\", error.response);\r\n                });\r\n            });\r\n        }).catch((error)=>{ console.log(error)});\r\n        document.getElementById('buttonSaveChanges').style.display='block';\r\n        setTimeout(function(){\r\n            document.getElementById('buttonSaveChanges').style.display='none';\r\n            window.location.href = \"/main\";\r\n        }.bind(this),2000);\r\n    }\r\n\r\n\r\n    render() {\r\n        let {isLoaded, user } = this.state;\r\n\r\n        if(localStorage.getItem('user')==null) {\r\n            return <Redirect to='/session' />;\r\n        }\r\n\r\n        if (!isLoaded){\r\n            return <div>Loading...</div>;\r\n        } else {\r\n            console.log('USEERRRR', user.image);\r\n        let imagem = \"http://atenas.hopto.org/uploads/\"+user.image;\r\n\r\n\r\n            return (\r\n                <div className=\"a_BodyEdit\">\r\n                    <div id='buttonSaveChanges' className='a_DivSave'>\r\n                        <p>Alteracoes efetuadas com sucesso</p>                    \r\n                    </div>\r\n                    <div className=\"a_InfoUser\">\r\n                        <img className=\"a_CloseEdit\" src={require ('../images/closewhite.svg')} onClick={()=>this.handleClicado()} />\r\n                        <div className=\"a_FotoUser\" style={{\r\n                            backgroundImage: 'url('+imagem+')',\r\n                            backgroundSize: 'cover',\r\n                            backgroundPosition: 'center'\r\n                        }}>\r\n                        </div>\r\n\r\n                        <div className=\"a_NomeUser\">{user.username}</div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div className=\"a_TextoEdit\">Personalização de Conteúdos</div>\r\n\r\n                    <PersonalizationCarouselCategory callMain={this.mainCallback} />\r\n\r\n                    <div className=\"a_EditSair\">\r\n                        <div className=\"a_BtnLogout\" onClick={Logout}>Terminar Sessão</div>\r\n                    </div>\r\n                </div>\r\n\r\n            );\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default InfoUser;\r\n"]},"metadata":{},"sourceType":"module"}