{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\components\\\\ListNewsList.js\";\nimport React, { Component } from 'react';\nimport { listnews } from '../css/listnews.css';\nimport Card from \"react-bootstrap/Card\";\nimport { col, container, row } from \"reactstrap\";\nimport axios from 'axios';\nimport recombee from 'recombee-js-api-client';\nimport Loading from './Loading';\n\nclass ListNewsList extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n    this.state = {\n      news: [],\n      news_topics: [],\n      topics: [],\n      //news_users: [],\n      //users: [],\n      //category_users: [],\n      isLoaded: false,\n      showMore: false,\n      guardados: [],\n      click: 100,\n      btn: [],\n      cor: 0,\n      todas: [],\n      arcozelo: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }),\n      mostrar: \"block\",\n      esconde: false\n    };\n    this.handleSendToLink = this.handleSendToLink.bind(this);\n    this.handleClicka = this.handleClicka.bind(this);\n    this.handleClickVerMais = this.handleClickVerMais.bind(this);\n    this.handleEsconde = this.handleEsconde.bind(this);\n  }\n\n  handleEsconde() {\n    this.setState({\n      arcozelo: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      })\n    });\n    console.log('vamos apagar');\n  }\n\n  handleSendToLink(event) {\n    const userEu = localStorage.getItem('user');\n    const noticiaId = event.id;\n    var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\n    console.log(noticiaId, '--> vai ser a noticia');\n    console.log(userEu, '--> vai ser o user');\n    console.log(event, '--> evento');\n    client.send(new recombee.AddPurchase(userEu, noticiaId, {\n      'cascadeCreate': true\n    })).then(res => {\n      console.log(res);\n      console.log('Noticia Visitada --> Compra feita'); //window.location.href = event.url;\n    });\n  }\n\n  handleClicka(event) {\n    console.log('here--->', event); //console.log(event.id);\n\n    const noticiaEspecial = event.id;\n    const userEu = localStorage.getItem('user');\n    console.log('Noticia Clicada', noticiaEspecial);\n    console.log('veer se ele existe', event.guardado);\n\n    if (event.guardado && event.guardado.length) {\n      axios.delete('api/newsUser/' + event.guardado[0].id).then(res => {\n        console.log(res.data);\n        console.log('apagar noticia');\n        this.componentDidMount(); //window.location.reload();\n      });\n    } else {\n      console.log('vais guardar a noticia e apresentar a div!');\n      var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\n      axios.post('api/newsUser', {\n        news_id: event.id,\n        user_id: userEu,\n        collection_id: 1\n      }).then(response => {\n        console.log('resposta:', response); // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\n\n        client.send(new recombee.AddCartAddition(userEu, event.id, {\n          'cascadeCreate': true\n        })).then(res => {\n          console.log(res); //window.location.href='';\n\n          this.setState({\n            aviso: 'Notícia guardada com sucesso',\n            arcozelo: React.createElement(\"div\", {\n              className: \"a_divNoticiaGuardada\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106\n              },\n              __self: this\n            }, \"Not\\xEDcia guardada com sucesso\")\n          }); // window.alert('Notícia Guardada');\n\n          setTimeout(function () {\n            this.setState({\n              arcozelo: React.createElement(\"div\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 110\n                },\n                __self: this\n              })\n            }); //window.location.reload();\n\n            this.componentDidMount();\n          }.bind(this), 2000);\n        });\n        console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\n      }).catch(error => {\n        console.log('erro: ', error.response);\n      });\n    }\n  }\n\n  handleClick(btnid) {\n    this.setState({\n      click: btnid,\n      clickk: btnid\n    });\n\n    if (btnid == 100) {\n      console.log('faz o recombeeee');\n      this.setState({\n        news: []\n      });\n      this.componentDidMount();\n    } else {\n      Promise.all([axios('api/newsCategory/' + localStorage.getItem('user') + '/' + btnid)]).then(([res1]) => {\n        return Promise.all([res1]);\n      }).then(([res1]) => {\n        this.setState({\n          isLoaded: true,\n          news: res1.data.data\n        });\n      });\n    }\n  }\n\n  handleClickVerMais() {\n    this.setState({\n      showMore: true,\n      esconde: true\n    });\n    document.getElementById(\"botaoVerMais\").style.display = \"none\";\n  }\n\n  componentDidMount() {\n    let client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\n    let userID = localStorage.getItem('user');\n    let noticiasRecomendadas = [];\n    let apresentarNoticias = [];\n    let check = false;\n    this._isMounted = true;\n    const passthis = this;\n\n    if (this._isMounted) {\n      Promise.all([axios('api/userCategory/' + userID), axios('api/newsAll/' + localStorage.getItem('user'))]).then(([res5, res6]) => {\n        return Promise.all([res5, res6]);\n      }).then(([res5, res6]) => {\n        if (this.state.click == 100) {\n          client.send(new recombee.RecommendItemsToUser(userID, 10)).then(function (res) {\n            console.log('para mim: ', res.recomms);\n            res.recomms.map(value => {\n              noticiasRecomendadas.push(value.id);\n            });\n            noticiasRecomendadas.map(value => {\n              res6.data.data.map(value2 => {\n                if (value2.id == value) {\n                  apresentarNoticias.push(value2);\n                }\n\n                console.log('hfhahfa', apresentarNoticias);\n                console.log('hey buddy2-->', apresentarNoticias);\n                passthis.setState({\n                  news: apresentarNoticias\n                });\n              });\n            });\n          });\n        }\n\n        passthis.setState({\n          isLoaded: true,\n          category: res5.data.data,\n          todas: res6.data.data\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    console.log('unMounted', this._isMounted);\n    this._isMounted = false;\n    console.log('unMounted', this._isMounted);\n  }\n\n  render() {\n    const localuser = localStorage.getItem('user');\n    var _this$state = this.state,\n        isLoaded = _this$state.isLoaded,\n        news = _this$state.news,\n        news_topics = _this$state.news_topics,\n        topics = _this$state.topics,\n        guardados = _this$state.guardados,\n        click = _this$state.click,\n        mostrar = _this$state.mostrar;\n    const numberOfItems = this.state.showMore ? news.length : 3;\n\n    if (!isLoaded) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      });\n    } else {\n      const show_news = [];\n      const rita = \"\";\n      let i = -1;\n\n      if (news.length < 3) {\n        mostrar = \"none\";\n      } else {\n        mostrar = \"block\";\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, this.state.arcozelo, React.createElement(\"div\", {\n        className: \"a_secundarymenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: this.state.click === 100 ? 'a_card_categorys_active' : 'a_card_categorys',\n        onClick: () => this.handleClick(100),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"PARA MIM\", React.createElement(\"div\", {\n        hidden: this.state.click !== 100,\n        className: \"a_category_bolinha\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      })), this.state.category.map(mauuu => {\n        return React.createElement(\"button\", {\n          className: this.state.click === mauuu.id ? 'a_card_categorys_active' : 'a_card_categorys',\n          key: mauuu.id,\n          id: mauuu.id,\n          onClick: () => this.handleClick(mauuu.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, mauuu.category, React.createElement(\"div\", {\n          hidden: this.state.click !== mauuu.id,\n          className: \"a_category_bolinha\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }));\n      })), news.slice(0, numberOfItems).map((value, key) => {\n        let cor = \"\";\n\n        if (value.guardado && value.guardado.length) {\n          cor = \"guardados_vermelho_preenchido.svg\";\n        } else {\n          cor = \"guardados_vermelho_contorno.svg\";\n        }\n\n        let src = \"http://atenas.hopto.org/uploads/\" + value.image;\n        console.log('arcozelo porra', this.state.click);\n        console.log(value);\n        return React.createElement(\"div\", {\n          className: \"col-sm-4 a_list_margem\",\n          key: value.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }), React.createElement(Card, {\n          className: \"a_list_change_card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"linksList\",\n          onClick: () => {\n            this.handleSendToLink(value);\n          },\n          href: value.url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(Card.Header, {\n          className: \"a_list_news \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, value.topicoNoticia), React.createElement(Card.Body, {\n          className: \"a_list_change_body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"a_divImageNoticia\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"a_list_radius\",\n          src: src,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        })), React.createElement(Card.Title, {\n          className: \"a_list_margin_title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"a_list_titulos\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, value.title)))), React.createElement(\"div\", {\n          className: \"btnGuardaList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          type: \"button\",\n          className: \"a_list_position_news\",\n          onClick: () => {\n            this.handleClicka(value);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"a_list_img_guardados\",\n          src: require(`../images/` + cor),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        })))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }));\n      }), React.createElement(\"button\", {\n        id: \"botaoVerMais\",\n        style: {\n          display: mostrar\n        },\n        className: \"VerMaisBtn\",\n        onClick: () => this.handleClickVerMais(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Ver mais\"));\n    }\n  }\n\n}\n\nexport default ListNewsList;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/components/ListNewsList.js"],"names":["React","Component","listnews","Card","col","container","row","axios","recombee","Loading","ListNewsList","constructor","props","_isMounted","state","news","news_topics","topics","isLoaded","showMore","guardados","click","btn","cor","todas","arcozelo","mostrar","esconde","handleSendToLink","bind","handleClicka","handleClickVerMais","handleEsconde","setState","console","log","event","userEu","localStorage","getItem","noticiaId","id","client","ApiClient","send","AddPurchase","then","res","noticiaEspecial","guardado","length","delete","data","componentDidMount","post","news_id","user_id","collection_id","response","AddCartAddition","aviso","setTimeout","catch","error","handleClick","btnid","clickk","Promise","all","res1","document","getElementById","style","display","userID","noticiasRecomendadas","apresentarNoticias","check","passthis","res5","res6","RecommendItemsToUser","recomms","map","value","push","value2","category","componentWillUnmount","render","localuser","numberOfItems","show_news","rita","i","mauuu","slice","key","src","image","url","topicoNoticia","title","require"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport {listnews} from '../css/listnews.css';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {col, container, row} from \"reactstrap\";\r\nimport axios from 'axios';\r\nimport recombee from 'recombee-js-api-client';\r\nimport Loading from './Loading';\r\n\r\n\r\nclass ListNewsList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this._isMounted = false;\r\n        this.state = {\r\n            news: [],\r\n            news_topics: [],\r\n            topics: [],\r\n            //news_users: [],\r\n            //users: [],\r\n            //category_users: [],\r\n            isLoaded: false,\r\n            showMore: false,\r\n            guardados: [],\r\n            click: 100,\r\n            btn: [],\r\n            cor: 0,\r\n            todas: [],\r\n            arcozelo: <div></div>,\r\n            mostrar: \"block\",\r\n            esconde: false,\r\n        };\r\n        this.handleSendToLink = this.handleSendToLink.bind(this);\r\n        this.handleClicka = this.handleClicka.bind(this);\r\n        this.handleClickVerMais = this.handleClickVerMais.bind(this);\r\n        this.handleEsconde = this.handleEsconde.bind(this);\r\n\r\n    }\r\n    handleEsconde () {\r\n        this.setState({\r\n            arcozelo: <div></div>\r\n        });\r\n        console.log('vamos apagar');\r\n    }\r\n    handleSendToLink(event) {\r\n        const userEu = localStorage.getItem('user');\r\n        const noticiaId = event.id;\r\n        var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\r\n\r\n        console.log(noticiaId, '--> vai ser a noticia');\r\n        console.log(userEu, '--> vai ser o user');\r\n        console.log(event, '--> evento');\r\n\r\n        client.send(new recombee.AddPurchase(\r\n            userEu,\r\n            noticiaId,\r\n            {\r\n                'cascadeCreate': true\r\n            }))\r\n            .then(res => {\r\n                console.log(res);\r\n                console.log('Noticia Visitada --> Compra feita');\r\n                //window.location.href = event.url;\r\n            });\r\n    }\r\n\r\n    handleClicka(event) {\r\n        console.log('here--->', event);\r\n        //console.log(event.id);\r\n        const noticiaEspecial = event.id;\r\n        const userEu = localStorage.getItem('user');\r\n        console.log('Noticia Clicada', noticiaEspecial);\r\n        console.log('veer se ele existe', event.guardado);\r\n        if (event.guardado && event.guardado.length) {\r\n            axios.delete('api/newsUser/' + event.guardado[0].id)\r\n                .then(res => {\r\n                    console.log(res.data);\r\n                    console.log('apagar noticia');\r\n                    this.componentDidMount();\r\n                    //window.location.reload();\r\n                });\r\n\r\n        } else {\r\n            console.log('vais guardar a noticia e apresentar a div!');\r\n            var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\r\n            \r\n                    axios.post('api/newsUser', {\r\n                        news_id: event.id,\r\n                        user_id: userEu,\r\n                        collection_id: 1\r\n                    })\r\n                        .then(response => {\r\n                            console.log('resposta:', response);\r\n\r\n                            // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\r\n                            client.send(new recombee.AddCartAddition(\r\n                                userEu,\r\n                                event.id,\r\n                                {\r\n                                    'cascadeCreate': true\r\n                                })).then(res => {\r\n                                console.log(res);\r\n                                //window.location.href='';\r\n                                this.setState({\r\n                                    aviso: 'Notícia guardada com sucesso',\r\n                                    arcozelo: <div className='a_divNoticiaGuardada'>Notícia guardada com sucesso</div>\r\n                                });\r\n                               // window.alert('Notícia Guardada');\r\n                                setTimeout(function(){\r\n                                    this.setState({arcozelo:<div></div>});\r\n                                    //window.location.reload();\r\n                                    this.componentDidMount()\r\n\r\n                                }.bind(this),2000);\r\n\r\n\r\n                            });\r\n                            console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\r\n                        })\r\n                        .catch(error => {\r\n                            console.log('erro: ', error.response);\r\n                        });\r\n                \r\n\r\n        }\r\n    }\r\n    handleClick(btnid) {\r\n        this.setState({click: btnid, clickk: btnid});\r\n        if (btnid == 100) {\r\n            console.log('faz o recombeeee');\r\n            this.setState({news: []})\r\n            this.componentDidMount();\r\n        } else {\r\n            Promise.all([axios('api/newsCategory/' + localStorage.getItem('user') + '/' + btnid)])\r\n\r\n                .then(([res1]) => {\r\n                    return Promise.all([res1])\r\n                })\r\n\r\n                .then(([res1]) => {\r\n\r\n                    this.setState({\r\n                        isLoaded: true,\r\n                        news: res1.data.data\r\n                    })\r\n                });\r\n        }\r\n    }\r\n\r\n    handleClickVerMais() {\r\n        this.setState({ showMore: true, esconde: true });\r\n        document.getElementById(\"botaoVerMais\").style.display = \"none\";\r\n    }\r\n\r\n    componentDidMount() {\r\n        let client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\r\n        let userID = localStorage.getItem('user');\r\n        let noticiasRecomendadas = [];\r\n        let apresentarNoticias = [];\r\n        let check = false;\r\n        this._isMounted = true;\r\n        const passthis = this;\r\n        if (this._isMounted) {\r\n            Promise.all([axios('api/userCategory/' + userID), axios('api/newsAll/' + localStorage.getItem('user'))])\r\n\r\n                .then(([res5, res6]) => {\r\n                    return Promise.all([res5, res6])\r\n                })\r\n                .then(([res5, res6]) => {\r\n                    if (this.state.click == 100) {\r\n                        client.send(new recombee.RecommendItemsToUser(userID, 10))\r\n                            .then(function (res) {\r\n                                console.log('para mim: ',res.recomms);\r\n                                res.recomms.map((value) => {\r\n                                    noticiasRecomendadas.push(value.id);\r\n                                });\r\n                                noticiasRecomendadas.map((value) => {\r\n                                    res6.data.data.map((value2) => {\r\n                                        if (value2.id == value) {\r\n                                            apresentarNoticias.push(value2);\r\n                                        }\r\n                                        console.log('hfhahfa',apresentarNoticias);\r\n\r\n\r\n                                        console.log('hey buddy2-->', apresentarNoticias);\r\n                                        passthis.setState({\r\n                                            news:apresentarNoticias\r\n                                        });\r\n                                    \r\n                                    })\r\n                                });\r\n                            })\r\n                        }\r\n                    passthis.setState({\r\n                        isLoaded: true,\r\n                        category: res5.data.data,\r\n                        todas: res6.data.data,\r\n                    })\r\n\r\n                });\r\n\r\n\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        console.log('unMounted', this._isMounted);\r\n\r\n        this._isMounted = false;\r\n        console.log('unMounted', this._isMounted);\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const localuser = localStorage.getItem('user');\r\n        var {isLoaded, news, news_topics, topics, guardados, click, mostrar} = this.state;\r\n        const numberOfItems = this.state.showMore ? news.length : 3;\r\n\r\n        if (!isLoaded) {\r\n            return <Loading />\r\n        } else {\r\n\r\n            const show_news = [];\r\n            const rita = \"\";\r\n            let i = -1;\r\n            if (news.length<3) {\r\n                mostrar = \"none\"\r\n               \r\n            } else {\r\n                mostrar = \"block\";\r\n        \r\n            }\r\n            return (\r\n                <div>\r\n                    {this.state.arcozelo}\r\n                    \r\n                    <div className=\"a_secundarymenu\">\r\n\r\n                        <button className={this.state.click === 100 ? 'a_card_categorys_active' : 'a_card_categorys'}\r\n                                onClick={() => this.handleClick(100)}>\r\n                            PARA MIM\r\n                            <div hidden={this.state.click !== 100} className=\"a_category_bolinha\"></div>\r\n                        </button>\r\n\r\n                        {this.state.category.map((mauuu) => {\r\n\r\n\r\n                            return (\r\n                                <button\r\n                                    className={this.state.click === mauuu.id ? 'a_card_categorys_active' : 'a_card_categorys'}\r\n                                    key={mauuu.id} id={mauuu.id} onClick={() => this.handleClick(mauuu.id)}>\r\n                                    {mauuu.category}\r\n                                    <div hidden={this.state.click !== mauuu.id} className=\"a_category_bolinha\"></div>\r\n                                </button>\r\n                            )\r\n\r\n                        })}\r\n\r\n                    </div>\r\n\r\n\r\n                    {\r\n\r\n                            \r\n                            news.slice(0, numberOfItems).map((value, key) => {\r\n                            let cor = \"\";\r\n                            if (value.guardado && value.guardado.length) {\r\n                                cor = \"guardados_vermelho_preenchido.svg\"\r\n                            } else {\r\n                                cor = \"guardados_vermelho_contorno.svg\"\r\n                            }\r\n                            let src = \"http://atenas.hopto.org/uploads/\" + value.image;\r\n                            console.log('arcozelo porra', this.state.click);\r\n                            console.log(value);\r\n                            return (\r\n                                <div className='col-sm-4 a_list_margem' key={value.id}>\r\n                                    <br />\r\n                                    <Card className='a_list_change_card'>\r\n                                        <a className=\"linksList\" onClick={() => {\r\n                                                        this.handleSendToLink(value)\r\n                                                    }} href={value.url}>\r\n                                            <Card.Header className='a_list_news '>{value.topicoNoticia}</Card.Header>\r\n                                            <Card.Body className='a_list_change_body'>\r\n                                                <div className=\"a_divImageNoticia\">\r\n\r\n                                                    <img className='a_list_radius'\r\n                                                         src={src}/>\r\n                                                </div>\r\n                                                <Card.Title className='a_list_margin_title'>\r\n                                                    <div className='a_list_titulos'>{value.title}</div>\r\n\r\n\r\n                                                </Card.Title>\r\n                                            </Card.Body>\r\n                                        </a>\r\n\r\n\r\n                                        <div className=\"btnGuardaList\">\r\n                                            <a type='button' className='a_list_position_news' onClick={()=>{this.handleClicka(value)}}>\r\n                                                <img className='a_list_img_guardados'\r\n                                                     src={require(`../images/` + cor)}/>\r\n                                            </a>\r\n                                        </div>\r\n\r\n\r\n                                    </Card>\r\n                                    <br />\r\n                                    \r\n                                </div>\r\n                            )\r\n\r\n                        })}\r\n                        <button id='botaoVerMais' style={{display: mostrar}} className='VerMaisBtn' onClick={() => this.handleClickVerMais()}>Ver mais</button>\r\n                </div>\r\n\r\n\r\n            );\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default ListNewsList"]},"metadata":{},"sourceType":"module"}