{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\laravel-base\\\\src\\\\views\\\\CollectionView.js\";\nimport React, { Component } from 'react';\nimport '../css/saved.css';\nimport Card from \"react-bootstrap/Card\";\nimport axios from 'axios';\nimport '../css/collectiondetail.css';\nimport Loading from '../components/Loading';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport recombee from 'recombee-js-api-client';\n\nclass CollectionView extends Component {\n  constructor() {\n    super();\n    this.state = {\n      dados: [],\n      isLoaded: false,\n      ultimo: \"\",\n      arcozelo: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      })\n    };\n    this.handleSendToLink = this.handleSendToLink.bind(this);\n    this.handleClicka = this.handleClicka.bind(this);\n  }\n\n  handlePerfil() {\n    window.location.href = \"/edit\";\n  }\n\n  handleSearch() {\n    window.location.href = \"/search\";\n  }\n\n  handleSendToLink(event) {\n    const userEu = localStorage.getItem('user');\n    const noticiaId = event.id;\n    var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\n    console.log(noticiaId, '--> vai ser a noticia');\n    console.log(userEu, '--> vai ser o user');\n    console.log(event, '--> evento');\n    client.send(new recombee.AddPurchase(userEu, noticiaId, {\n      'cascadeCreate': true\n    })).then(res => {\n      console.log(res);\n      console.log('Noticia Visitada --> Compra feita');\n      window.location.href = event.url;\n    });\n  }\n\n  handleClicka(event) {\n    console.log('here--->', event); //console.log(event.id);\n\n    const noticiaEspecial = event.id;\n    const userEu = localStorage.getItem('user');\n    console.log('Noticia Clicada', noticiaEspecial);\n    console.log('veer se ele existe', event.guardado);\n\n    if (event.guardado && event.guardado.length) {\n      axios.delete('api/newsUser/' + event.guardado[0].id).then(res => {\n        console.log(res.data);\n        console.log('apagar noticia');\n        this.componentDidMount(); // window.location.reload();\n      });\n    } else {\n      console.log('vais guardar a noticia e apresentar a div!');\n      var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\n      axios.post('api/newsUser', {\n        news_id: event.id,\n        user_id: userEu,\n        collection_id: 1\n      }).then(response => {\n        console.log('resposta:', response); // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\n\n        client.send(new recombee.AddCartAddition(userEu, event.id, {\n          'cascadeCreate': true\n        })).then(res => {\n          console.log(res); //window.location.href='';\n\n          this.setState({\n            aviso: 'Notícia guardada com sucesso',\n            arcozelo: React.createElement(\"div\", {\n              className: \"a_divNoticiaGuardada\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 97\n              },\n              __self: this\n            }, \"Not\\xEDcia guardada com sucesso\")\n          }); // window.alert('Notícia Guardada');\n\n          setTimeout(function () {\n            this.setState({\n              arcozelo: React.createElement(\"div\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 101\n                },\n                __self: this\n              })\n            });\n            this.componentDidMount();\n          }.bind(this), 2000);\n        });\n        console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\n      }).catch(error => {\n        console.log('erro: ', error.response);\n      });\n    }\n  }\n\n  componentDidMount() {\n    //const passingThis = this;\n    Promise.all([axios('api/newsAll/' + localStorage.getItem('user'))]).then(([res1]) => {\n      return Promise.all([res1]);\n      console.log('coitadinhos, não passam de um workshop', res1);\n    }).then(([res1]) => {\n      console.log('FUNCIONAAAAAA:', res1.data.data);\n      this.setState({\n        isLoaded: true,\n        dados: res1.data.data\n      });\n    });\n    console.log('ah está bem, lá vem mais uma sériezinha', this.state.dados);\n  }\n\n  render() {\n    if (localStorage.getItem('user')) {\n      return React.createElement(Redirect, {\n        to: \"/main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      });\n    } //let lastElement = this.state.dados[this.state.dados - 1];\n\n\n    console.log('teatrinhos, com falinhas mansas', this.state.dados);\n\n    if (!this.state.isLoaded) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      });\n    } else {\n      let ultima = \"\";\n      let cor = \"\";\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.state.arcozelo, React.createElement(\"div\", {\n        className: \"a_mainview_header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"a_mainview_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../images/logo_atenas.png'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"a_mainview_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Atenas\"), React.createElement(\"div\", {\n        className: \"a_mainview_actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../images/search.svg'),\n        onClick: () => this.handleSearch(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: require('../images/user.svg'),\n        onClick: () => this.handlePerfil(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Nome da cole\\xE7\\xE3o\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, this.state.dados.map(lement => {\n        if (lement.guardado && lement.guardado.length) {\n          cor = \"guardados_vermelho_preenchido.svg\";\n        } else {\n          cor = \"guardados_vermelho_contorno.svg\";\n        }\n\n        let src2 = \"http://atenas.hopto.org/uploads/\" + lement.image;\n        console.log('diz lá', lement.guardado);\n\n        if (lement.guardado[0]) {\n          let ultima = src2;\n          console.log(src2, 'espinho');\n          return React.createElement(\"div\", {\n            className: \"col-sm-4 a_list_margem\",\n            key: lement.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }, React.createElement(Card, {\n            className: \"a_list_change_card\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            className: \"linksList\",\n            href: lement.url,\n            onClick: () => {\n              this.handleSendToLink(lement);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }, React.createElement(Card.Header, {\n            className: \"a_list_news \",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184\n            },\n            __self: this\n          }, lement.topicoNoticia), React.createElement(Card.Body, {\n            className: \"a_list_change_body\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"a_divImageNoticia\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"a_list_radius\",\n            src: src2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          })), React.createElement(Card.Title, {\n            className: \"a_list_margin_title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"a_list_titulos\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, lement.title)))), React.createElement(\"div\", {\n            className: \"btnGuardaList\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            type: \"button\",\n            className: \"a_list_position_news\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196\n            },\n            __self: this\n          }, \" onClick=\", () => {\n            this.handleClicka(lement);\n          }, React.createElement(\"img\", {\n            className: \"a_list_img_guardados\",\n            src: require(`../images/` + cor),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197\n            },\n            __self: this\n          })))));\n        }\n\n        console.log('lemos', ultima);\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }));\n    }\n  }\n\n}\n\nexport default CollectionView;","map":{"version":3,"sources":["C:/xampp/htdocs/laravel-base/src/views/CollectionView.js"],"names":["React","Component","Card","axios","Loading","BrowserRouter","Router","Switch","Route","Link","recombee","CollectionView","constructor","state","dados","isLoaded","ultimo","arcozelo","handleSendToLink","bind","handleClicka","handlePerfil","window","location","href","handleSearch","event","userEu","localStorage","getItem","noticiaId","id","client","ApiClient","console","log","send","AddPurchase","then","res","url","noticiaEspecial","guardado","length","delete","data","componentDidMount","post","news_id","user_id","collection_id","response","AddCartAddition","setState","aviso","setTimeout","catch","error","Promise","all","res1","render","ultima","cor","require","map","lement","src2","image","topicoNoticia","title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport '../css/saved.css';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport axios from 'axios';\r\nimport '../css/collectiondetail.css';\r\nimport Loading from '../components/Loading';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link\r\n  } from \"react-router-dom\";\r\nimport recombee from 'recombee-js-api-client';\r\n\r\nclass CollectionView extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            dados: [],\r\n            isLoaded: false,\r\n            ultimo: \"\",\r\n            arcozelo: <div></div>\r\n        };\r\n        this.handleSendToLink = this.handleSendToLink.bind(this);\r\n        this.handleClicka = this.handleClicka.bind(this);\r\n    }\r\n    handlePerfil() {\r\n        window.location.href = \"/edit\"\r\n    }\r\n    handleSearch() {\r\n        window.location.href = \"/search\"\r\n    }\r\n\r\n    handleSendToLink(event) {\r\n        const userEu = localStorage.getItem('user');\r\n        const noticiaId = event.id;\r\n        var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\r\n\r\n        console.log(noticiaId, '--> vai ser a noticia');\r\n        console.log(userEu, '--> vai ser o user');\r\n        console.log(event, '--> evento');\r\n\r\n        client.send(new recombee.AddPurchase(\r\n            userEu,\r\n            noticiaId,\r\n            {\r\n                'cascadeCreate': true\r\n            }))\r\n            .then(res => {\r\n                console.log(res);\r\n                console.log('Noticia Visitada --> Compra feita');\r\n                window.location.href = event.url;\r\n            });\r\n\r\n\r\n    }\r\n    handleClicka(event) {\r\n        console.log('here--->', event);\r\n        //console.log(event.id);\r\n        const noticiaEspecial = event.id;\r\n        const userEu = localStorage.getItem('user');\r\n        console.log('Noticia Clicada', noticiaEspecial);\r\n        console.log('veer se ele existe', event.guardado);\r\n\r\n        if (event.guardado && event.guardado.length) {\r\n            axios.delete('api/newsUser/' + event.guardado[0].id)\r\n                .then(res => {\r\n                    console.log(res.data);\r\n                    console.log('apagar noticia');\r\n                    this.componentDidMount();\r\n                   // window.location.reload();\r\n                });\r\n\r\n        } else {\r\n            console.log('vais guardar a noticia e apresentar a div!');\r\n            var client = new recombee.ApiClient('atenas-atenas-final', 'cuXTbNwBbReV9FcCwC05qLaJ73lIUjmXqgw6kXU2Mo2rGTfuepGuEmrpuaC2xiG4');\r\n            \r\n                    axios.post('api/newsUser', {\r\n                        news_id: event.id,\r\n                        user_id: userEu,\r\n                        collection_id: 1\r\n                    })\r\n                        .then(response => {\r\n                            console.log('resposta:', response);\r\n\r\n                            // 2. ir para o sistema de recomendação, em que vai o userID e o nome da notícia\r\n                            client.send(new recombee.AddCartAddition(\r\n                                userEu,\r\n                                event.id,\r\n                                {\r\n                                    'cascadeCreate': true\r\n                                })).then(res => {\r\n                                console.log(res);\r\n                                //window.location.href='';\r\n                                this.setState({\r\n                                    aviso: 'Notícia guardada com sucesso',\r\n                                    arcozelo: <div className='a_divNoticiaGuardada'>Notícia guardada com sucesso</div>\r\n                                });\r\n                               // window.alert('Notícia Guardada');\r\n                                setTimeout(function(){\r\n                                    this.setState({arcozelo:<div></div>});\r\n                                    this.componentDidMount();\r\n                                }.bind(this),2000);\r\n\r\n\r\n                            });\r\n                            console.log('Item adicionado ao carrinho| Notícia está no recomendador guardados');\r\n                        })\r\n                        .catch(error => {\r\n                            console.log('erro: ', error.response);\r\n                        });\r\n                \r\n\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        //const passingThis = this;\r\n        Promise.all([axios('api/newsAll/' + localStorage.getItem('user'))])\r\n\r\n            .then(([res1]) => {\r\n                return Promise.all([res1])\r\n                console.log('coitadinhos, não passam de um workshop', res1)\r\n            })\r\n            .then(([res1]) => {\r\n                console.log('FUNCIONAAAAAA:', res1.data.data);\r\n                this.setState({\r\n                    isLoaded: true,\r\n                    dados: res1.data.data\r\n                })\r\n            })\r\n        console.log('ah está bem, lá vem mais uma sériezinha', this.state.dados)\r\n    }\r\n\r\n    render() {\r\n        if (localStorage.getItem('user')) {\r\n            return <Redirect to='/main' />;\r\n        }\r\n        //let lastElement = this.state.dados[this.state.dados - 1];\r\n        console.log('teatrinhos, com falinhas mansas', this.state.dados);\r\n        if (!this.state.isLoaded) {\r\n            return <Loading />\r\n        } else {\r\n            let ultima = \"\";\r\n            let cor = \"\";\r\n            return (\r\n                <div>\r\n                    {this.state.arcozelo}\r\n                    <div className=\"a_mainview_header\">\r\n                        <div className=\"a_mainview_logo\">\r\n                            <img src={require('../images/logo_atenas.png')} />\r\n                        </div>\r\n                        <div className=\"a_mainview_title\">\r\n                            Atenas\r\n                    </div>\r\n                        <div className=\"a_mainview_actions\">\r\n                            <img src={require('../images/search.svg')} onClick={() => this.handleSearch()} />\r\n                            <img src={require('../images/user.svg')} onClick={() => this.handlePerfil()} />\r\n                        </div>\r\n                    </div>\r\n                    <br /><br /><br />\r\n                    <h6>Nome da coleção</h6>\r\n                    <div>\r\n                        {\r\n                            this.state.dados.map((lement) => {\r\n\r\n                                if (lement.guardado && lement.guardado.length) {\r\n                                    cor = \"guardados_vermelho_preenchido.svg\"\r\n                                } else {\r\n                                    cor = \"guardados_vermelho_contorno.svg\"\r\n                                }\r\n                                let src2 = \"http://atenas.hopto.org/uploads/\" + lement.image;\r\n\r\n                                console.log('diz lá', lement.guardado)\r\n                                if (lement.guardado[0]) {\r\n\r\n                                    let ultima = src2;\r\n                                    console.log(src2, 'espinho');\r\n                                    return (\r\n                                        <div className='col-sm-4 a_list_margem' key={lement.id}>\r\n                                            <Card className='a_list_change_card'>\r\n                                                <a className=\"linksList\" href={lement.url} onClick={()=>{\r\n                                                    this.handleSendToLink(lement);\r\n                                                }}>\r\n                                                    <Card.Header className='a_list_news '>{lement.topicoNoticia}</Card.Header>\r\n                                                    <Card.Body className='a_list_change_body'>\r\n                                                        <div className=\"a_divImageNoticia\">\r\n                                                            <img className='a_list_radius'\r\n                                                                src={src2} />\r\n                                                        </div>\r\n                                                        <Card.Title className='a_list_margin_title'>\r\n                                                            <div className='a_list_titulos'>{lement.title}</div>\r\n                                                        </Card.Title>\r\n                                                    </Card.Body>\r\n                                                </a>\r\n                                                <div className=\"btnGuardaList\">\r\n                                                    <a type='button' className='a_list_position_news'> onClick={()=>{this.handleClicka(lement)}}\r\n                                                        <img className='a_list_img_guardados'\r\n                                                            src={require(`../images/` + cor)} />\r\n                                                    </a>\r\n                                                </div>\r\n                                            </Card>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                                console.log('lemos', ultima);\r\n                            })\r\n\r\n                        }\r\n                    </div>\r\n                    <br />\r\n                    \r\n                    <br /><br /><br />\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default CollectionView;"]},"metadata":{},"sourceType":"module"}